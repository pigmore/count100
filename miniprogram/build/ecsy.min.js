!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e=e||self,function(){var n=e.ECSY,o=e.ECSY={};t(o),o.noConflict=function(){return e.ECSY=n,o}}())}(this,(function(exports){"use strict";function queryKey(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];if(!componentRegistered(o))throw new Error("Tried to create a query with an unregistered component");if("object"==typeof o){var s="not"===o.operator?"!":o.operator;t.push(s+o.Component._typeId)}else t.push(o._typeId)}return t.sort().join("-")}const hasWindow="undefined"!=typeof window,now=hasWindow&&void 0!==window.performance?performance.now.bind(performance):Date.now.bind(Date);function componentRegistered(e){return"object"==typeof e&&void 0!==e.Component._typeId||e.isComponent&&void 0!==e._typeId}class SystemManager{constructor(e){this._systems=[],this._executeSystems=[],this.world=e,this.lastExecutedSystem=null}registerSystem(e,t){if(!e.isSystem)throw new Error(`System '${e.name}' does not extend 'System' class`);if(void 0!==this.getSystem(e))return console.warn(`System '${e.getName()}' already registered.`),this;var n=new e(this.world,t);return n.init&&n.init(t),n.order=this._systems.length,this._systems.push(n),n.execute&&(this._executeSystems.push(n),this.sortSystems()),this}unregisterSystem(e){let t=this.getSystem(e);return void 0===t?(console.warn(`Can unregister system '${e.getName()}'. It doesn't exist.`),this):(this._systems.splice(this._systems.indexOf(t),1),t.execute&&this._executeSystems.splice(this._executeSystems.indexOf(t),1),this)}sortSystems(){this._executeSystems.sort((e,t)=>e.priority-t.priority||e.order-t.order)}getSystem(e){return this._systems.find(t=>t instanceof e)}getSystems(){return this._systems}removeSystem(e){var t=this._systems.indexOf(e);~t&&this._systems.splice(t,1)}executeSystem(e,t,n){if(e.initialized&&e.canExecute()){let o=now();e.execute(t,n),e.executeTime=now()-o,this.lastExecutedSystem=e,e.clearEvents()}}stop(){this._executeSystems.forEach(e=>e.stop())}execute(e,t,n){this._executeSystems.forEach(o=>(n||o.enabled)&&this.executeSystem(o,e,t))}stats(){for(var e={numSystems:this._systems.length,systems:{}},t=0;t<this._systems.length;t++){var n=this._systems[t],o=e.systems[n.getName()]={queries:{},executeTime:n.executeTime};for(var s in n.ctx)o.queries[s]=n.ctx[s].stats()}return e}}class ObjectPool{constructor(e,t){this.freeList=[],this.count=0,this.T=e,this.isObjectPool=!0,void 0!==t&&this.expand(t)}acquire(){return this.freeList.length<=0&&this.expand(Math.round(.2*this.count)+1),this.freeList.pop()}release(e){e.reset(),this.freeList.push(e)}expand(e){for(var t=0;t<e;t++){var n=new this.T;n._pool=this,this.freeList.push(n)}this.count+=e}totalSize(){return this.count}totalFree(){return this.freeList.length}totalUsed(){return this.count-this.freeList.length}}class EventDispatcher{constructor(){this._listeners={},this.stats={fired:0,handled:0}}addEventListener(e,t){let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){return void 0!==this._listeners[e]&&-1!==this._listeners[e].indexOf(t)}removeEventListener(e,t){var n=this._listeners[e];if(void 0!==n){var o=n.indexOf(t);-1!==o&&n.splice(o,1)}}dispatchEvent(e,t,n){this.stats.fired++;var o=this._listeners[e];if(void 0!==o)for(var s=o.slice(0),i=0;i<s.length;i++)s[i].call(this,t,n)}resetCounters(){this.stats.fired=this.stats.handled=0}}class Query{constructor(e,t){if(this.Components=[],this.NotComponents=[],e.forEach(e=>{"object"==typeof e?this.NotComponents.push(e.Component):this.Components.push(e)}),0===this.Components.length)throw new Error("Can't create a query without components");this.entities=[],this.eventDispatcher=new EventDispatcher,this.reactive=!1,this.key=queryKey(e);for(var n=0;n<t._entities.length;n++){var o=t._entities[n];this.match(o)&&(o.queries.push(this),this.entities.push(o))}}addEntity(e){e.queries.push(this),this.entities.push(e),this.eventDispatcher.dispatchEvent(Query.prototype.ENTITY_ADDED,e)}removeEntity(e){let t=this.entities.indexOf(e);~t&&(this.entities.splice(t,1),t=e.queries.indexOf(this),e.queries.splice(t,1),this.eventDispatcher.dispatchEvent(Query.prototype.ENTITY_REMOVED,e))}match(e){return e.hasAllComponents(this.Components)&&!e.hasAnyComponents(this.NotComponents)}toJSON(){return{key:this.key,reactive:this.reactive,components:{included:this.Components.map(e=>e.name),not:this.NotComponents.map(e=>e.name)},numEntities:this.entities.length}}stats(){return{numComponents:this.Components.length,numEntities:this.entities.length}}}Query.prototype.ENTITY_ADDED="Query#ENTITY_ADDED",Query.prototype.ENTITY_REMOVED="Query#ENTITY_REMOVED",Query.prototype.COMPONENT_CHANGED="Query#COMPONENT_CHANGED";class QueryManager{constructor(e){this._world=e,this._queries={}}onEntityRemoved(e){for(var t in this._queries){var n=this._queries[t];-1!==e.queries.indexOf(n)&&n.removeEntity(e)}}onEntityComponentAdded(e,t){for(var n in this._queries){var o=this._queries[n];~o.NotComponents.indexOf(t)&&~o.entities.indexOf(e)?o.removeEntity(e):~o.Components.indexOf(t)&&o.match(e)&&!~o.entities.indexOf(e)&&o.addEntity(e)}}onEntityComponentRemoved(e,t){for(var n in this._queries){var o=this._queries[n];~o.NotComponents.indexOf(t)&&!~o.entities.indexOf(e)&&o.match(e)?o.addEntity(e):~o.Components.indexOf(t)&&~o.entities.indexOf(e)&&!o.match(e)&&o.removeEntity(e)}}getQuery(e){var t=queryKey(e),n=this._queries[t];return n||(this._queries[t]=n=new Query(e,this._world)),n}stats(){var e={};for(var t in this._queries)e[t]=this._queries[t].stats();return e}}class Component{constructor(e){if(!1!==e){const t=this.constructor.schema;for(const n in t)if(e&&e.hasOwnProperty(n))this[n]=e[n];else{const e=t[n];if(e.hasOwnProperty("default"))this[n]=e.type.clone(e.default);else{const t=e.type;this[n]=t.clone(t.default)}}}this._pool=null}copy(e){const t=this.constructor.schema;for(const n in t){const o=t[n];e.hasOwnProperty(n)&&(this[n]=o.type.copy(e[n],this[n]))}return this}clone(){return(new this.constructor).copy(this)}reset(){const e=this.constructor.schema;for(const t in e){const n=e[t];if(n.hasOwnProperty("default"))this[t]=n.type.copy(n.default,this[t]);else{const e=n.type;this[t]=e.copy(e.default,this[t])}}}dispose(){this._pool&&this._pool.release(this)}getName(){return this.constructor.getName()}checkUndefinedAttributes(e){const t=this.constructor.schema;Object.keys(e).forEach(e=>{t.hasOwnProperty(e)||console.warn(`Trying to set attribute '${e}' not defined in the '${this.constructor.name}' schema. Please fix the schema, the attribute value won't be set`)})}}Component.schema={},Component.isComponent=!0,Component.getName=function(){return this.displayName||this.name};class SystemStateComponent extends Component{}SystemStateComponent.isSystemStateComponent=!0;class EntityPool extends ObjectPool{constructor(e,t,n){super(t,void 0),this.entityManager=e,void 0!==n&&this.expand(n)}expand(e){for(var t=0;t<e;t++){var n=new this.T(this.entityManager);n._pool=this,this.freeList.push(n)}this.count+=e}}class EntityManager{constructor(e){this.world=e,this.componentsManager=e.componentsManager,this._entities=[],this._nextEntityId=0,this._entitiesByNames={},this._queryManager=new QueryManager(this),this.eventDispatcher=new EventDispatcher,this._entityPool=new EntityPool(this,this.world.options.entityClass,this.world.options.entityPoolSize),this.entitiesWithComponentsToRemove=[],this.entitiesToRemove=[],this.deferredRemovalEnabled=!0}getEntityByName(e){return this._entitiesByNames[e]}createEntity(e){var t=this._entityPool.acquire();return t.alive=!0,t.name=e||"",e&&(this._entitiesByNames[e]?console.warn(`Entity name '${e}' already exist`):this._entitiesByNames[e]=t),this._entities.push(t),this.eventDispatcher.dispatchEvent(ENTITY_CREATED,t),t}entityAddComponent(e,t,n){if(void 0===t._typeId&&!this.world.componentsManager._ComponentsMap[t._typeId])throw new Error(`Attempted to add unregistered component "${t.getName()}"`);if(!~e._ComponentTypes.indexOf(t)){e._ComponentTypes.push(t),t.__proto__===SystemStateComponent&&e.numStateComponents++;var o=this.world.componentsManager.getComponentsPool(t),s=o?o.acquire():new t(n);o&&n&&s.copy(n),e._components[t._typeId]=s,this._queryManager.onEntityComponentAdded(e,t),this.world.componentsManager.componentAddedToEntity(t),this.eventDispatcher.dispatchEvent(COMPONENT_ADDED,e,t)}}entityRemoveComponent(e,t,n){var o=e._ComponentTypes.indexOf(t);~o&&(this.eventDispatcher.dispatchEvent(COMPONENT_REMOVE,e,t),n?this._entityRemoveComponentSync(e,t,o):(0===e._ComponentTypesToRemove.length&&this.entitiesWithComponentsToRemove.push(e),e._ComponentTypes.splice(o,1),e._ComponentTypesToRemove.push(t),e._componentsToRemove[t._typeId]=e._components[t._typeId],delete e._components[t._typeId]),this._queryManager.onEntityComponentRemoved(e,t),t.__proto__===SystemStateComponent&&(e.numStateComponents--,0!==e.numStateComponents||e.alive||e.remove()))}_entityRemoveComponentSync(e,t,n){e._ComponentTypes.splice(n,1);var o=e._components[t._typeId];delete e._components[t._typeId],o.dispose(),this.world.componentsManager.componentRemovedFromEntity(t)}entityRemoveAllComponents(e,t){let n=e._ComponentTypes;for(let o=n.length-1;o>=0;o--)n[o].__proto__!==SystemStateComponent&&this.entityRemoveComponent(e,n[o],t)}removeEntity(e,t){var n=this._entities.indexOf(e);if(!~n)throw new Error("Tried to remove entity not in list");e.alive=!1,this.entityRemoveAllComponents(e,t),0===e.numStateComponents&&(this.eventDispatcher.dispatchEvent(ENTITY_REMOVED,e),this._queryManager.onEntityRemoved(e),!0===t?this._releaseEntity(e,n):this.entitiesToRemove.push(e))}_releaseEntity(e,t){this._entities.splice(t,1),this._entitiesByNames[e.name]&&delete this._entitiesByNames[e.name],e._pool.release(e)}removeAllEntities(){for(var e=this._entities.length-1;e>=0;e--)this.removeEntity(this._entities[e])}processDeferredRemoval(){if(this.deferredRemovalEnabled){for(let e=0;e<this.entitiesToRemove.length;e++){let t=this.entitiesToRemove[e],n=this._entities.indexOf(t);this._releaseEntity(t,n)}this.entitiesToRemove.length=0;for(let t=0;t<this.entitiesWithComponentsToRemove.length;t++){let n=this.entitiesWithComponentsToRemove[t];for(;n._ComponentTypesToRemove.length>0;){let t=n._ComponentTypesToRemove.pop();var e=n._componentsToRemove[t._typeId];delete n._componentsToRemove[t._typeId],e.dispose(),this.world.componentsManager.componentRemovedFromEntity(t)}}this.entitiesWithComponentsToRemove.length=0}}queryComponents(e){return this._queryManager.getQuery(e)}count(){return this._entities.length}stats(){var e={numEntities:this._entities.length,numQueries:Object.keys(this._queryManager._queries).length,queries:this._queryManager.stats(),numComponentPool:Object.keys(this.componentsManager._componentPool).length,componentPool:{},eventDispatcher:this.eventDispatcher.stats};for(var t in this.componentsManager._componentPool){var n=this.componentsManager._componentPool[t];e.componentPool[n.T.getName()]={used:n.totalUsed(),size:n.count}}return e}}const ENTITY_CREATED="EntityManager#ENTITY_CREATE",ENTITY_REMOVED="EntityManager#ENTITY_REMOVED",COMPONENT_ADDED="EntityManager#COMPONENT_ADDED",COMPONENT_REMOVE="EntityManager#COMPONENT_REMOVE";class ComponentManager{constructor(){this.Components=[],this._ComponentsMap={},this._componentPool={},this.numComponents={},this.nextComponentId=0}hasComponent(e){return-1!==this.Components.indexOf(e)}registerComponent(e,t){if(-1!==this.Components.indexOf(e))return void console.warn(`Component type: '${e.getName()}' already registered.`);const n=e.schema;if(!n)throw new Error(`Component "${e.getName()}" has no schema property.`);for(const t in n){if(!n[t].type)throw new Error(`Invalid schema for component "${e.getName()}". Missing type for "${t}" property.`)}e._typeId=this.nextComponentId++,this.Components.push(e),this._ComponentsMap[e._typeId]=e,this.numComponents[e._typeId]=0,void 0===t?t=new ObjectPool(e):!1===t&&(t=void 0),this._componentPool[e._typeId]=t}componentAddedToEntity(e){this.numComponents[e._typeId]++}componentRemovedFromEntity(e){this.numComponents[e._typeId]--}getComponentsPool(e){return this._componentPool[e._typeId]}}const Version="0.3.1";class Entity{constructor(e){this._entityManager=e||null,this.id=e._nextEntityId++,this._ComponentTypes=[],this._components={},this._componentsToRemove={},this.queries=[],this._ComponentTypesToRemove=[],this.alive=!1,this.numStateComponents=0}getComponent(e,t){var n=this._components[e._typeId];return n||!0!==t||(n=this._componentsToRemove[e._typeId]),n}getRemovedComponent(e){return this._componentsToRemove[e._typeId]}getComponents(){return this._components}getComponentsToRemove(){return this._componentsToRemove}getComponentTypes(){return this._ComponentTypes}getMutableComponent(e){var t=this._components[e._typeId];if(t){for(var n=0;n<this.queries.length;n++){var o=this.queries[n];o.reactive&&-1!==o.Components.indexOf(e)&&o.eventDispatcher.dispatchEvent(Query.prototype.COMPONENT_CHANGED,this,t)}return t}}addComponent(e,t){return this._entityManager.entityAddComponent(this,e,t),this}removeComponent(e,t){return this._entityManager.entityRemoveComponent(this,e,t),this}hasComponent(e,t){return!!~this._ComponentTypes.indexOf(e)||!0===t&&this.hasRemovedComponent(e)}hasRemovedComponent(e){return!!~this._ComponentTypesToRemove.indexOf(e)}hasAllComponents(e){for(var t=0;t<e.length;t++)if(!this.hasComponent(e[t]))return!1;return!0}hasAnyComponents(e){for(var t=0;t<e.length;t++)if(this.hasComponent(e[t]))return!0;return!1}removeAllComponents(e){return this._entityManager.entityRemoveAllComponents(this,e)}copy(e){for(var t in e._components){var n=e._components[t];this.addComponent(n.constructor),this.getComponent(n.constructor).copy(n)}return this}clone(){return new Entity(this._entityManager).copy(this)}reset(){for(var e in this.id=this._entityManager._nextEntityId++,this._ComponentTypes.length=0,this.queries.length=0,this._components)delete this._components[e]}remove(e){return this._entityManager.removeEntity(this,e)}}const DEFAULT_OPTIONS={entityPoolSize:0,entityClass:Entity};class World{constructor(e={}){if(this.options=Object.assign({},DEFAULT_OPTIONS,e),this.componentsManager=new ComponentManager(this),this.entityManager=new EntityManager(this),this.systemManager=new SystemManager(this),this.enabled=!0,this.eventQueues={},hasWindow&&"undefined"!=typeof CustomEvent){var t=new CustomEvent("ecsy-world-created",{detail:{world:this,version:Version}});window.dispatchEvent(t)}this.lastTime=now()/1e3}registerComponent(e,t){return this.componentsManager.registerComponent(e,t),this}registerSystem(e,t){return this.systemManager.registerSystem(e,t),this}hasRegisteredComponent(e){return this.componentsManager.hasComponent(e)}unregisterSystem(e){return this.systemManager.unregisterSystem(e),this}getSystem(e){return this.systemManager.getSystem(e)}getSystems(){return this.systemManager.getSystems()}execute(e,t){e||(e=(t=now()/1e3)-this.lastTime,this.lastTime=t),this.enabled&&(this.systemManager.execute(e,t),this.entityManager.processDeferredRemoval())}stop(){this.enabled=!1}play(){this.enabled=!0}createEntity(e){return this.entityManager.createEntity(e)}stats(){return{entities:this.entityManager.stats(),system:this.systemManager.stats()}}}class System{canExecute(){if(0===this._mandatoryQueries.length)return!0;for(let e=0;e<this._mandatoryQueries.length;e++){if(0===this._mandatoryQueries[e].entities.length)return!1}return!0}getName(){return this.constructor.getName()}constructor(e,t){if(this.world=e,this.enabled=!0,this._queries={},this.queries={},this.priority=0,this.executeTime=0,t&&t.priority&&(this.priority=t.priority),this._mandatoryQueries=[],this.initialized=!0,this.constructor.queries)for(var n in this.constructor.queries){var o=this.constructor.queries[n],s=o.components;if(!s||0===s.length)throw new Error("'components' attribute can't be empty in a query");let e=s.filter(e=>!componentRegistered(e));if(e.length>0)throw new Error(`Tried to create a query '${this.constructor.name}.${n}' with unregistered components: [${e.map(e=>e.getName()).join(", ")}]`);var i=this.world.entityManager.queryComponents(s);this._queries[n]=i,!0===o.mandatory&&this._mandatoryQueries.push(i),this.queries[n]={results:i.entities};var r=["added","removed","changed"];const t={added:Query.prototype.ENTITY_ADDED,removed:Query.prototype.ENTITY_REMOVED,changed:Query.prototype.COMPONENT_CHANGED};o.listen&&r.forEach(e=>{if(this.execute||console.warn(`System '${this.getName()}' has defined listen events (${r.join(", ")}) for query '${n}' but it does not implement the 'execute' method.`),o.listen[e]){let s=o.listen[e];if("changed"===e){if(i.reactive=!0,!0===s){let t=this.queries[n][e]=[];i.eventDispatcher.addEventListener(Query.prototype.COMPONENT_CHANGED,e=>{-1===t.indexOf(e)&&t.push(e)})}else if(Array.isArray(s)){let t=this.queries[n][e]=[];i.eventDispatcher.addEventListener(Query.prototype.COMPONENT_CHANGED,(e,n)=>{-1!==s.indexOf(n.constructor)&&-1===t.indexOf(e)&&t.push(e)})}}else{let o=this.queries[n][e]=[];i.eventDispatcher.addEventListener(t[e],e=>{-1===o.indexOf(e)&&o.push(e)})}}})}}stop(){this.executeTime=0,this.enabled=!1}play(){this.enabled=!0}clearEvents(){for(let t in this.queries){var e=this.queries[t];if(e.added&&(e.added.length=0),e.removed&&(e.removed.length=0),e.changed)if(Array.isArray(e.changed))e.changed.length=0;else for(let t in e.changed)e.changed[t].length=0}}toJSON(){var e={name:this.getName(),enabled:this.enabled,executeTime:this.executeTime,priority:this.priority,queries:{}};if(this.constructor.queries){var t=this.constructor.queries;for(let n in t){let o=this.queries[n],s=t[n],i=e.queries[n]={key:this._queries[n].key};if(i.mandatory=!0===s.mandatory,i.reactive=s.listen&&(!0===s.listen.added||!0===s.listen.removed||!0===s.listen.changed||Array.isArray(s.listen.changed)),i.reactive){i.listen={},["added","removed","changed"].forEach(e=>{o[e]&&(i.listen[e]={entities:o[e].length})})}}}return e}}function Not(e){return{operator:"not",Component:e}}System.isSystem=!0,System.getName=function(){return this.displayName||this.name};class TagComponent extends Component{constructor(){super(!1)}}TagComponent.isTagComponent=!0;const copyValue=e=>e,cloneValue=e=>e,copyArray=(e,t)=>{if(!e)return e;if(!t)return e.slice();t.length=0;for(let n=0;n<e.length;n++)t.push(e[n]);return t},cloneArray=e=>e&&e.slice(),copyJSON=e=>JSON.parse(JSON.stringify(e)),cloneJSON=e=>JSON.parse(JSON.stringify(e)),copyCopyable=(e,t)=>e?t?t.copy(e):e.clone():e,cloneClonable=e=>e&&e.clone();function createType(e){var t=["name","default","copy","clone"].filter(t=>!e.hasOwnProperty(t));if(t.length>0)throw new Error(`createType expects a type definition with the following properties: ${t.join(", ")}`);return e.isType=!0,e}const Types={Number:createType({name:"Number",default:0,copy:copyValue,clone:cloneValue}),Boolean:createType({name:"Boolean",default:!1,copy:copyValue,clone:cloneValue}),String:createType({name:"String",default:"",copy:copyValue,clone:cloneValue}),Array:createType({name:"Array",default:[],copy:copyArray,clone:cloneArray}),Ref:createType({name:"Ref",default:void 0,copy:copyValue,clone:cloneValue}),JSON:createType({name:"JSON",default:null,copy:copyJSON,clone:cloneJSON})};function generateId(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",o=n.length,s=0;s<e;s++)t+=n.charAt(Math.floor(Math.random()*o));return t}function injectScript(e,t){var n=document.createElement("script");n.src=e,n.onload=t,(document.head||document.documentElement).appendChild(n)}function hookConsoleAndErrors(e){["error","warning","log"].forEach(t=>{if("function"==typeof console[t]){var n=console[t].bind(console);console[t]=(...o)=>(e.send({method:"console",type:t,args:JSON.stringify(o)}),n.apply(null,o))}}),window.addEventListener("error",t=>{e.send({method:"error",error:JSON.stringify({message:t.error.message,stack:t.error.stack})})})}function includeRemoteIdHTML(e){let t=document.createElement("div");return t.style.cssText="\n    align-items: center;\n    background-color: #333;\n    color: #aaa;\n    display:flex;\n    font-family: Arial;\n    font-size: 1.1em;\n    height: 40px;\n    justify-content: center;\n    left: 0;\n    opacity: 0.9;\n    position: absolute;\n    right: 0;\n    text-align: center;\n    top: 0;\n  ",t.innerHTML=`Open ECSY devtools to connect to this page using the code:&nbsp;<b style="color: #fff">${e}</b>&nbsp;<button onClick="generateNewCode()">Generate new code</button>`,document.body.appendChild(t),t}function enableRemoteDevtools(remoteId){if(!hasWindow)return void console.warn("Remote devtools not available outside the browser");window.generateNewCode=()=>{window.localStorage.clear(),remoteId=generateId(6),window.localStorage.setItem("ecsyRemoteId",remoteId),window.location.reload(!1)},remoteId=remoteId||window.localStorage.getItem("ecsyRemoteId"),remoteId||(remoteId=generateId(6),window.localStorage.setItem("ecsyRemoteId",remoteId));let infoDiv=includeRemoteIdHTML(remoteId);window.__ECSY_REMOTE_DEVTOOLS_INJECTED=!0,window.__ECSY_REMOTE_DEVTOOLS={};let Version="",worldsBeforeLoading=[],onWorldCreated=e=>{var t=e.detail.world;Version=e.detail.version,worldsBeforeLoading.push(t)};window.addEventListener("ecsy-world-created",onWorldCreated);let onLoaded=()=>{var peer=new Peer(remoteId,{host:"peerjs.ecsy.io",secure:!0,port:443,config:{iceServers:[{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{url:"stun:stun4.l.google.com:19302"}]},debug:3});peer.on("open",()=>{peer.on("connection",connection=>{window.__ECSY_REMOTE_DEVTOOLS.connection=connection,connection.on("open",(function(){infoDiv.innerHTML="Connected",connection.on("data",(function(data){if("init"===data.type){var script=document.createElement("script");script.setAttribute("type","text/javascript"),script.onload=()=>{script.parentNode.removeChild(script),window.removeEventListener("ecsy-world-created",onWorldCreated),worldsBeforeLoading.forEach(e=>{var t=new CustomEvent("ecsy-world-created",{detail:{world:e,version:Version}});window.dispatchEvent(t)})},script.innerHTML=data.script,(document.head||document.documentElement).appendChild(script),script.onload(),hookConsoleAndErrors(connection)}else if("executeScript"===data.type){let value=eval(data.script);data.returnEval&&connection.send({method:"evalReturn",value:value})}}))}))})})};injectScript("https://cdn.jsdelivr.net/npm/peerjs@0.3.20/dist/peer.min.js",onLoaded)}if(hasWindow){const e=new URLSearchParams(window.location.search);e.has("enable-remote-devtools")&&enableRemoteDevtools()}exports.Component=Component,exports.Not=Not,exports.ObjectPool=ObjectPool,exports.System=System,exports.SystemStateComponent=SystemStateComponent,exports.TagComponent=TagComponent,exports.Types=Types,exports.Version=Version,exports.World=World,exports._Entity=Entity,exports.cloneArray=cloneArray,exports.cloneClonable=cloneClonable,exports.cloneJSON=cloneJSON,exports.cloneValue=cloneValue,exports.copyArray=copyArray,exports.copyCopyable=copyCopyable,exports.copyJSON=copyJSON,exports.copyValue=copyValue,exports.createType=createType,exports.enableRemoteDevtools=enableRemoteDevtools,Object.defineProperty(exports,"__esModule",{value:!0})}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWNzeS5taW4uanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9VdGlscy5qcyIsIi4uL3NyYy9TeXN0ZW1NYW5hZ2VyLmpzIiwiLi4vc3JjL09iamVjdFBvb2wuanMiLCIuLi9zcmMvRXZlbnREaXNwYXRjaGVyLmpzIiwiLi4vc3JjL1F1ZXJ5LmpzIiwiLi4vc3JjL1F1ZXJ5TWFuYWdlci5qcyIsIi4uL3NyYy9Db21wb25lbnQuanMiLCIuLi9zcmMvU3lzdGVtU3RhdGVDb21wb25lbnQuanMiLCIuLi9zcmMvRW50aXR5TWFuYWdlci5qcyIsIi4uL3NyYy9Db21wb25lbnRNYW5hZ2VyLmpzIiwiLi4vc3JjL1ZlcnNpb24uanMiLCIuLi9zcmMvRW50aXR5LmpzIiwiLi4vc3JjL1dvcmxkLmpzIiwiLi4vc3JjL1N5c3RlbS5qcyIsIi4uL3NyYy9UYWdDb21wb25lbnQuanMiLCIuLi9zcmMvVHlwZXMuanMiLCIuLi9zcmMvUmVtb3RlRGV2VG9vbHMvdXRpbHMuanMiLCIuLi9zcmMvUmVtb3RlRGV2VG9vbHMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXR1cm4gdGhlIG5hbWUgb2YgYSBjb21wb25lbnRcbiAqIEBwYXJhbSB7Q29tcG9uZW50fSBDb21wb25lbnRcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXROYW1lKENvbXBvbmVudCkge1xuICByZXR1cm4gQ29tcG9uZW50Lm5hbWU7XG59XG5cbi8qKlxuICogUmV0dXJuIGEgdmFsaWQgcHJvcGVydHkgbmFtZSBmb3IgdGhlIENvbXBvbmVudFxuICogQHBhcmFtIHtDb21wb25lbnR9IENvbXBvbmVudFxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBvbmVudFByb3BlcnR5TmFtZShDb21wb25lbnQpIHtcbiAgcmV0dXJuIGdldE5hbWUoQ29tcG9uZW50KTtcbn1cblxuLyoqXG4gKiBHZXQgYSBrZXkgZnJvbSBhIGxpc3Qgb2YgY29tcG9uZW50c1xuICogQHBhcmFtIHtBcnJheShDb21wb25lbnQpfSBDb21wb25lbnRzIEFycmF5IG9mIGNvbXBvbmVudHMgdG8gZ2VuZXJhdGUgdGhlIGtleVxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1ZXJ5S2V5KENvbXBvbmVudHMpIHtcbiAgdmFyIGlkcyA9IFtdO1xuICBmb3IgKHZhciBuID0gMDsgbiA8IENvbXBvbmVudHMubGVuZ3RoOyBuKyspIHtcbiAgICB2YXIgVCA9IENvbXBvbmVudHNbbl07XG5cbiAgICBpZiAoIWNvbXBvbmVudFJlZ2lzdGVyZWQoVCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVHJpZWQgdG8gY3JlYXRlIGEgcXVlcnkgd2l0aCBhbiB1bnJlZ2lzdGVyZWQgY29tcG9uZW50YCk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBUID09PSBcIm9iamVjdFwiKSB7XG4gICAgICB2YXIgb3BlcmF0b3IgPSBULm9wZXJhdG9yID09PSBcIm5vdFwiID8gXCIhXCIgOiBULm9wZXJhdG9yO1xuICAgICAgaWRzLnB1c2gob3BlcmF0b3IgKyBULkNvbXBvbmVudC5fdHlwZUlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWRzLnB1c2goVC5fdHlwZUlkKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gaWRzLnNvcnQoKS5qb2luKFwiLVwiKTtcbn1cblxuLy8gRGV0ZWN0b3IgZm9yIGJyb3dzZXIncyBcIndpbmRvd1wiXG5leHBvcnQgY29uc3QgaGFzV2luZG93ID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIjtcblxuLy8gcGVyZm9ybWFuY2Uubm93KCkgXCJwb2x5ZmlsbFwiXG5leHBvcnQgY29uc3Qgbm93ID1cbiAgaGFzV2luZG93ICYmIHR5cGVvZiB3aW5kb3cucGVyZm9ybWFuY2UgIT09IFwidW5kZWZpbmVkXCJcbiAgICA/IHBlcmZvcm1hbmNlLm5vdy5iaW5kKHBlcmZvcm1hbmNlKVxuICAgIDogRGF0ZS5ub3cuYmluZChEYXRlKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBvbmVudFJlZ2lzdGVyZWQoVCkge1xuICByZXR1cm4gKFxuICAgICh0eXBlb2YgVCA9PT0gXCJvYmplY3RcIiAmJiBULkNvbXBvbmVudC5fdHlwZUlkICE9PSB1bmRlZmluZWQpIHx8XG4gICAgKFQuaXNDb21wb25lbnQgJiYgVC5fdHlwZUlkICE9PSB1bmRlZmluZWQpXG4gICk7XG59XG4iLCJpbXBvcnQgeyBub3cgfSBmcm9tIFwiLi9VdGlscy5qc1wiO1xuXG5leHBvcnQgY2xhc3MgU3lzdGVtTWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKHdvcmxkKSB7XG4gICAgdGhpcy5fc3lzdGVtcyA9IFtdO1xuICAgIHRoaXMuX2V4ZWN1dGVTeXN0ZW1zID0gW107IC8vIFN5c3RlbXMgdGhhdCBoYXZlIGBleGVjdXRlYCBtZXRob2RcbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XG4gICAgdGhpcy5sYXN0RXhlY3V0ZWRTeXN0ZW0gPSBudWxsO1xuICB9XG5cbiAgcmVnaXN0ZXJTeXN0ZW0oU3lzdGVtQ2xhc3MsIGF0dHJpYnV0ZXMpIHtcbiAgICBpZiAoIVN5c3RlbUNsYXNzLmlzU3lzdGVtKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBTeXN0ZW0gJyR7U3lzdGVtQ2xhc3MubmFtZX0nIGRvZXMgbm90IGV4dGVuZCAnU3lzdGVtJyBjbGFzc2BcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZ2V0U3lzdGVtKFN5c3RlbUNsYXNzKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zb2xlLndhcm4oYFN5c3RlbSAnJHtTeXN0ZW1DbGFzcy5nZXROYW1lKCl9JyBhbHJlYWR5IHJlZ2lzdGVyZWQuYCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB2YXIgc3lzdGVtID0gbmV3IFN5c3RlbUNsYXNzKHRoaXMud29ybGQsIGF0dHJpYnV0ZXMpO1xuICAgIGlmIChzeXN0ZW0uaW5pdCkgc3lzdGVtLmluaXQoYXR0cmlidXRlcyk7XG4gICAgc3lzdGVtLm9yZGVyID0gdGhpcy5fc3lzdGVtcy5sZW5ndGg7XG4gICAgdGhpcy5fc3lzdGVtcy5wdXNoKHN5c3RlbSk7XG4gICAgaWYgKHN5c3RlbS5leGVjdXRlKSB7XG4gICAgICB0aGlzLl9leGVjdXRlU3lzdGVtcy5wdXNoKHN5c3RlbSk7XG4gICAgICB0aGlzLnNvcnRTeXN0ZW1zKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgdW5yZWdpc3RlclN5c3RlbShTeXN0ZW1DbGFzcykge1xuICAgIGxldCBzeXN0ZW0gPSB0aGlzLmdldFN5c3RlbShTeXN0ZW1DbGFzcyk7XG4gICAgaWYgKHN5c3RlbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBDYW4gdW5yZWdpc3RlciBzeXN0ZW0gJyR7U3lzdGVtQ2xhc3MuZ2V0TmFtZSgpfScuIEl0IGRvZXNuJ3QgZXhpc3QuYFxuICAgICAgKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHRoaXMuX3N5c3RlbXMuc3BsaWNlKHRoaXMuX3N5c3RlbXMuaW5kZXhPZihzeXN0ZW0pLCAxKTtcblxuICAgIGlmIChzeXN0ZW0uZXhlY3V0ZSkge1xuICAgICAgdGhpcy5fZXhlY3V0ZVN5c3RlbXMuc3BsaWNlKHRoaXMuX2V4ZWN1dGVTeXN0ZW1zLmluZGV4T2Yoc3lzdGVtKSwgMSk7XG4gICAgfVxuXG4gICAgLy8gQHRvZG8gQWRkIHN5c3RlbS51bnJlZ2lzdGVyKCkgY2FsbCB0byBmcmVlIHJlc291cmNlc1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgc29ydFN5c3RlbXMoKSB7XG4gICAgdGhpcy5fZXhlY3V0ZVN5c3RlbXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgcmV0dXJuIGEucHJpb3JpdHkgLSBiLnByaW9yaXR5IHx8IGEub3JkZXIgLSBiLm9yZGVyO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0U3lzdGVtKFN5c3RlbUNsYXNzKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N5c3RlbXMuZmluZCgocykgPT4gcyBpbnN0YW5jZW9mIFN5c3RlbUNsYXNzKTtcbiAgfVxuXG4gIGdldFN5c3RlbXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N5c3RlbXM7XG4gIH1cblxuICByZW1vdmVTeXN0ZW0oU3lzdGVtQ2xhc3MpIHtcbiAgICB2YXIgaW5kZXggPSB0aGlzLl9zeXN0ZW1zLmluZGV4T2YoU3lzdGVtQ2xhc3MpO1xuICAgIGlmICghfmluZGV4KSByZXR1cm47XG5cbiAgICB0aGlzLl9zeXN0ZW1zLnNwbGljZShpbmRleCwgMSk7XG4gIH1cblxuICBleGVjdXRlU3lzdGVtKHN5c3RlbSwgZGVsdGEsIHRpbWUpIHtcbiAgICBpZiAoc3lzdGVtLmluaXRpYWxpemVkKSB7XG4gICAgICBpZiAoc3lzdGVtLmNhbkV4ZWN1dGUoKSkge1xuICAgICAgICBsZXQgc3RhcnRUaW1lID0gbm93KCk7XG4gICAgICAgIHN5c3RlbS5leGVjdXRlKGRlbHRhLCB0aW1lKTtcbiAgICAgICAgc3lzdGVtLmV4ZWN1dGVUaW1lID0gbm93KCkgLSBzdGFydFRpbWU7XG4gICAgICAgIHRoaXMubGFzdEV4ZWN1dGVkU3lzdGVtID0gc3lzdGVtO1xuICAgICAgICBzeXN0ZW0uY2xlYXJFdmVudHMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdG9wKCkge1xuICAgIHRoaXMuX2V4ZWN1dGVTeXN0ZW1zLmZvckVhY2goKHN5c3RlbSkgPT4gc3lzdGVtLnN0b3AoKSk7XG4gIH1cblxuICBleGVjdXRlKGRlbHRhLCB0aW1lLCBmb3JjZVBsYXkpIHtcbiAgICB0aGlzLl9leGVjdXRlU3lzdGVtcy5mb3JFYWNoKFxuICAgICAgKHN5c3RlbSkgPT5cbiAgICAgICAgKGZvcmNlUGxheSB8fCBzeXN0ZW0uZW5hYmxlZCkgJiYgdGhpcy5leGVjdXRlU3lzdGVtKHN5c3RlbSwgZGVsdGEsIHRpbWUpXG4gICAgKTtcbiAgfVxuXG4gIHN0YXRzKCkge1xuICAgIHZhciBzdGF0cyA9IHtcbiAgICAgIG51bVN5c3RlbXM6IHRoaXMuX3N5c3RlbXMubGVuZ3RoLFxuICAgICAgc3lzdGVtczoge30sXG4gICAgfTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fc3lzdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHN5c3RlbSA9IHRoaXMuX3N5c3RlbXNbaV07XG4gICAgICB2YXIgc3lzdGVtU3RhdHMgPSAoc3RhdHMuc3lzdGVtc1tzeXN0ZW0uZ2V0TmFtZSgpXSA9IHtcbiAgICAgICAgcXVlcmllczoge30sXG4gICAgICAgIGV4ZWN1dGVUaW1lOiBzeXN0ZW0uZXhlY3V0ZVRpbWUsXG4gICAgICB9KTtcbiAgICAgIGZvciAodmFyIG5hbWUgaW4gc3lzdGVtLmN0eCkge1xuICAgICAgICBzeXN0ZW1TdGF0cy5xdWVyaWVzW25hbWVdID0gc3lzdGVtLmN0eFtuYW1lXS5zdGF0cygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzdGF0cztcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIE9iamVjdFBvb2wge1xuICAvLyBAdG9kbyBBZGQgaW5pdGlhbCBzaXplXG4gIGNvbnN0cnVjdG9yKFQsIGluaXRpYWxTaXplKSB7XG4gICAgdGhpcy5mcmVlTGlzdCA9IFtdO1xuICAgIHRoaXMuY291bnQgPSAwO1xuICAgIHRoaXMuVCA9IFQ7XG4gICAgdGhpcy5pc09iamVjdFBvb2wgPSB0cnVlO1xuXG4gICAgaWYgKHR5cGVvZiBpbml0aWFsU2l6ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy5leHBhbmQoaW5pdGlhbFNpemUpO1xuICAgIH1cbiAgfVxuXG4gIGFjcXVpcmUoKSB7XG4gICAgLy8gR3JvdyB0aGUgbGlzdCBieSAyMCVpc2ggaWYgd2UncmUgb3V0XG4gICAgaWYgKHRoaXMuZnJlZUxpc3QubGVuZ3RoIDw9IDApIHtcbiAgICAgIHRoaXMuZXhwYW5kKE1hdGgucm91bmQodGhpcy5jb3VudCAqIDAuMikgKyAxKTtcbiAgICB9XG5cbiAgICB2YXIgaXRlbSA9IHRoaXMuZnJlZUxpc3QucG9wKCk7XG5cbiAgICByZXR1cm4gaXRlbTtcbiAgfVxuXG4gIHJlbGVhc2UoaXRlbSkge1xuICAgIGl0ZW0ucmVzZXQoKTtcbiAgICB0aGlzLmZyZWVMaXN0LnB1c2goaXRlbSk7XG4gIH1cblxuICBleHBhbmQoY291bnQpIHtcbiAgICBmb3IgKHZhciBuID0gMDsgbiA8IGNvdW50OyBuKyspIHtcbiAgICAgIHZhciBjbG9uZSA9IG5ldyB0aGlzLlQoKTtcbiAgICAgIGNsb25lLl9wb29sID0gdGhpcztcbiAgICAgIHRoaXMuZnJlZUxpc3QucHVzaChjbG9uZSk7XG4gICAgfVxuICAgIHRoaXMuY291bnQgKz0gY291bnQ7XG4gIH1cblxuICB0b3RhbFNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY291bnQ7XG4gIH1cblxuICB0b3RhbEZyZWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZnJlZUxpc3QubGVuZ3RoO1xuICB9XG5cbiAgdG90YWxVc2VkKCkge1xuICAgIHJldHVybiB0aGlzLmNvdW50IC0gdGhpcy5mcmVlTGlzdC5sZW5ndGg7XG4gIH1cbn1cbiIsIi8qKlxuICogQHByaXZhdGVcbiAqIEBjbGFzcyBFdmVudERpc3BhdGNoZXJcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXZlbnREaXNwYXRjaGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fbGlzdGVuZXJzID0ge307XG4gICAgdGhpcy5zdGF0cyA9IHtcbiAgICAgIGZpcmVkOiAwLFxuICAgICAgaGFuZGxlZDogMCxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhbiBldmVudCBsaXN0ZW5lclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIE5hbWUgb2YgdGhlIGV2ZW50IHRvIGxpc3RlblxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBDYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gdGhlIGV2ZW50IGlzIGZpcmVkXG4gICAqL1xuICBhZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHtcbiAgICBsZXQgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xuICAgIGlmIChsaXN0ZW5lcnNbZXZlbnROYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBsaXN0ZW5lcnNbZXZlbnROYW1lXSA9IFtdO1xuICAgIH1cblxuICAgIGlmIChsaXN0ZW5lcnNbZXZlbnROYW1lXS5pbmRleE9mKGxpc3RlbmVyKSA9PT0gLTEpIHtcbiAgICAgIGxpc3RlbmVyc1tldmVudE5hbWVdLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBldmVudCBsaXN0ZW5lciBpcyBhbHJlYWR5IGFkZGVkIHRvIHRoZSBsaXN0IG9mIGxpc3RlbmVyc1xuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIE5hbWUgb2YgdGhlIGV2ZW50IHRvIGNoZWNrXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIENhbGxiYWNrIGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50XG4gICAqL1xuICBoYXNFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5fbGlzdGVuZXJzW2V2ZW50TmFtZV0gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgdGhpcy5fbGlzdGVuZXJzW2V2ZW50TmFtZV0uaW5kZXhPZihsaXN0ZW5lcikgIT09IC0xXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYW4gZXZlbnQgbGlzdGVuZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSBOYW1lIG9mIHRoZSBldmVudCB0byByZW1vdmVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgQ2FsbGJhY2sgZm9yIHRoZSBzcGVjaWZpZWQgZXZlbnRcbiAgICovXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBsaXN0ZW5lcikge1xuICAgIHZhciBsaXN0ZW5lckFycmF5ID0gdGhpcy5fbGlzdGVuZXJzW2V2ZW50TmFtZV07XG4gICAgaWYgKGxpc3RlbmVyQXJyYXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIGluZGV4ID0gbGlzdGVuZXJBcnJheS5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgbGlzdGVuZXJBcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwYXRjaCBhbiBldmVudFxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIE5hbWUgb2YgdGhlIGV2ZW50IHRvIGRpc3BhdGNoXG4gICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHkgKE9wdGlvbmFsKSBFbnRpdHkgdG8gZW1pdFxuICAgKiBAcGFyYW0ge0NvbXBvbmVudH0gY29tcG9uZW50XG4gICAqL1xuICBkaXNwYXRjaEV2ZW50KGV2ZW50TmFtZSwgZW50aXR5LCBjb21wb25lbnQpIHtcbiAgICB0aGlzLnN0YXRzLmZpcmVkKys7XG5cbiAgICB2YXIgbGlzdGVuZXJBcnJheSA9IHRoaXMuX2xpc3RlbmVyc1tldmVudE5hbWVdO1xuICAgIGlmIChsaXN0ZW5lckFycmF5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciBhcnJheSA9IGxpc3RlbmVyQXJyYXkuc2xpY2UoMCk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJyYXlbaV0uY2FsbCh0aGlzLCBlbnRpdHksIGNvbXBvbmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IHN0YXRzIGNvdW50ZXJzXG4gICAqL1xuICByZXNldENvdW50ZXJzKCkge1xuICAgIHRoaXMuc3RhdHMuZmlyZWQgPSB0aGlzLnN0YXRzLmhhbmRsZWQgPSAwO1xuICB9XG59XG4iLCJpbXBvcnQgRXZlbnREaXNwYXRjaGVyIGZyb20gXCIuL0V2ZW50RGlzcGF0Y2hlci5qc1wiO1xuaW1wb3J0IHsgcXVlcnlLZXkgfSBmcm9tIFwiLi9VdGlscy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBRdWVyeSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5KENvbXBvbmVudCl9IENvbXBvbmVudHMgTGlzdCBvZiB0eXBlcyBvZiBjb21wb25lbnRzIHRvIHF1ZXJ5XG4gICAqL1xuICBjb25zdHJ1Y3RvcihDb21wb25lbnRzLCBtYW5hZ2VyKSB7XG4gICAgdGhpcy5Db21wb25lbnRzID0gW107XG4gICAgdGhpcy5Ob3RDb21wb25lbnRzID0gW107XG5cbiAgICBDb21wb25lbnRzLmZvckVhY2goKGNvbXBvbmVudCkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBjb21wb25lbnQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgdGhpcy5Ob3RDb21wb25lbnRzLnB1c2goY29tcG9uZW50LkNvbXBvbmVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLkNvbXBvbmVudHMucHVzaChjb21wb25lbnQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuQ29tcG9uZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IGNyZWF0ZSBhIHF1ZXJ5IHdpdGhvdXQgY29tcG9uZW50c1wiKTtcbiAgICB9XG5cbiAgICB0aGlzLmVudGl0aWVzID0gW107XG5cbiAgICB0aGlzLmV2ZW50RGlzcGF0Y2hlciA9IG5ldyBFdmVudERpc3BhdGNoZXIoKTtcblxuICAgIC8vIFRoaXMgcXVlcnkgaXMgYmVpbmcgdXNlZCBieSBhIHJlYWN0aXZlIHN5c3RlbVxuICAgIHRoaXMucmVhY3RpdmUgPSBmYWxzZTtcblxuICAgIHRoaXMua2V5ID0gcXVlcnlLZXkoQ29tcG9uZW50cyk7XG5cbiAgICAvLyBGaWxsIHRoZSBxdWVyeSB3aXRoIHRoZSBleGlzdGluZyBlbnRpdGllc1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFuYWdlci5fZW50aXRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBlbnRpdHkgPSBtYW5hZ2VyLl9lbnRpdGllc1tpXTtcbiAgICAgIGlmICh0aGlzLm1hdGNoKGVudGl0eSkpIHtcbiAgICAgICAgLy8gQHRvZG8gPz8/IHRoaXMuYWRkRW50aXR5KGVudGl0eSk7ID0+IHByZXZlbnRpbmcgdGhlIGV2ZW50IHRvIGJlIGdlbmVyYXRlZFxuICAgICAgICBlbnRpdHkucXVlcmllcy5wdXNoKHRoaXMpO1xuICAgICAgICB0aGlzLmVudGl0aWVzLnB1c2goZW50aXR5KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRkIGVudGl0eSB0byB0aGlzIHF1ZXJ5XG4gICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHlcbiAgICovXG4gIGFkZEVudGl0eShlbnRpdHkpIHtcbiAgICBlbnRpdHkucXVlcmllcy5wdXNoKHRoaXMpO1xuICAgIHRoaXMuZW50aXRpZXMucHVzaChlbnRpdHkpO1xuXG4gICAgdGhpcy5ldmVudERpc3BhdGNoZXIuZGlzcGF0Y2hFdmVudChRdWVyeS5wcm90b3R5cGUuRU5USVRZX0FEREVELCBlbnRpdHkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBlbnRpdHkgZnJvbSB0aGlzIHF1ZXJ5XG4gICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHlcbiAgICovXG4gIHJlbW92ZUVudGl0eShlbnRpdHkpIHtcbiAgICBsZXQgaW5kZXggPSB0aGlzLmVudGl0aWVzLmluZGV4T2YoZW50aXR5KTtcbiAgICBpZiAofmluZGV4KSB7XG4gICAgICB0aGlzLmVudGl0aWVzLnNwbGljZShpbmRleCwgMSk7XG5cbiAgICAgIGluZGV4ID0gZW50aXR5LnF1ZXJpZXMuaW5kZXhPZih0aGlzKTtcbiAgICAgIGVudGl0eS5xdWVyaWVzLnNwbGljZShpbmRleCwgMSk7XG5cbiAgICAgIHRoaXMuZXZlbnREaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgIFF1ZXJ5LnByb3RvdHlwZS5FTlRJVFlfUkVNT1ZFRCxcbiAgICAgICAgZW50aXR5XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIG1hdGNoKGVudGl0eSkge1xuICAgIHJldHVybiAoXG4gICAgICBlbnRpdHkuaGFzQWxsQ29tcG9uZW50cyh0aGlzLkNvbXBvbmVudHMpICYmXG4gICAgICAhZW50aXR5Lmhhc0FueUNvbXBvbmVudHModGhpcy5Ob3RDb21wb25lbnRzKVxuICAgICk7XG4gIH1cblxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtleTogdGhpcy5rZXksXG4gICAgICByZWFjdGl2ZTogdGhpcy5yZWFjdGl2ZSxcbiAgICAgIGNvbXBvbmVudHM6IHtcbiAgICAgICAgaW5jbHVkZWQ6IHRoaXMuQ29tcG9uZW50cy5tYXAoKEMpID0+IEMubmFtZSksXG4gICAgICAgIG5vdDogdGhpcy5Ob3RDb21wb25lbnRzLm1hcCgoQykgPT4gQy5uYW1lKSxcbiAgICAgIH0sXG4gICAgICBudW1FbnRpdGllczogdGhpcy5lbnRpdGllcy5sZW5ndGgsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gc3RhdHMgZm9yIHRoaXMgcXVlcnlcbiAgICovXG4gIHN0YXRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBudW1Db21wb25lbnRzOiB0aGlzLkNvbXBvbmVudHMubGVuZ3RoLFxuICAgICAgbnVtRW50aXRpZXM6IHRoaXMuZW50aXRpZXMubGVuZ3RoLFxuICAgIH07XG4gIH1cbn1cblxuUXVlcnkucHJvdG90eXBlLkVOVElUWV9BRERFRCA9IFwiUXVlcnkjRU5USVRZX0FEREVEXCI7XG5RdWVyeS5wcm90b3R5cGUuRU5USVRZX1JFTU9WRUQgPSBcIlF1ZXJ5I0VOVElUWV9SRU1PVkVEXCI7XG5RdWVyeS5wcm90b3R5cGUuQ09NUE9ORU5UX0NIQU5HRUQgPSBcIlF1ZXJ5I0NPTVBPTkVOVF9DSEFOR0VEXCI7XG4iLCJpbXBvcnQgUXVlcnkgZnJvbSBcIi4vUXVlcnkuanNcIjtcbmltcG9ydCB7IHF1ZXJ5S2V5IH0gZnJvbSBcIi4vVXRpbHMuanNcIjtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQGNsYXNzIFF1ZXJ5TWFuYWdlclxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBRdWVyeU1hbmFnZXIge1xuICBjb25zdHJ1Y3Rvcih3b3JsZCkge1xuICAgIHRoaXMuX3dvcmxkID0gd29ybGQ7XG5cbiAgICAvLyBRdWVyaWVzIGluZGV4ZWQgYnkgYSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNvbXBvbmVudHMgaXQgaGFzXG4gICAgdGhpcy5fcXVlcmllcyA9IHt9O1xuICB9XG5cbiAgb25FbnRpdHlSZW1vdmVkKGVudGl0eSkge1xuICAgIGZvciAodmFyIHF1ZXJ5TmFtZSBpbiB0aGlzLl9xdWVyaWVzKSB7XG4gICAgICB2YXIgcXVlcnkgPSB0aGlzLl9xdWVyaWVzW3F1ZXJ5TmFtZV07XG4gICAgICBpZiAoZW50aXR5LnF1ZXJpZXMuaW5kZXhPZihxdWVyeSkgIT09IC0xKSB7XG4gICAgICAgIHF1ZXJ5LnJlbW92ZUVudGl0eShlbnRpdHkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB3aGVuIGEgY29tcG9uZW50IGlzIGFkZGVkIHRvIGFuIGVudGl0eVxuICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5IEVudGl0eSB0aGF0IGp1c3QgZ290IHRoZSBuZXcgY29tcG9uZW50XG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fSBDb21wb25lbnQgQ29tcG9uZW50IGFkZGVkIHRvIHRoZSBlbnRpdHlcbiAgICovXG4gIG9uRW50aXR5Q29tcG9uZW50QWRkZWQoZW50aXR5LCBDb21wb25lbnQpIHtcbiAgICAvLyBAdG9kbyBVc2UgYml0bWFzayBmb3IgY2hlY2tpbmcgY29tcG9uZW50cz9cblxuICAgIC8vIENoZWNrIGVhY2ggaW5kZXhlZCBxdWVyeSB0byBzZWUgaWYgd2UgbmVlZCB0byBhZGQgdGhpcyBlbnRpdHkgdG8gdGhlIGxpc3RcbiAgICBmb3IgKHZhciBxdWVyeU5hbWUgaW4gdGhpcy5fcXVlcmllcykge1xuICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5fcXVlcmllc1txdWVyeU5hbWVdO1xuXG4gICAgICBpZiAoXG4gICAgICAgICEhfnF1ZXJ5Lk5vdENvbXBvbmVudHMuaW5kZXhPZihDb21wb25lbnQpICYmXG4gICAgICAgIH5xdWVyeS5lbnRpdGllcy5pbmRleE9mKGVudGl0eSlcbiAgICAgICkge1xuICAgICAgICBxdWVyeS5yZW1vdmVFbnRpdHkoZW50aXR5KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCB0aGUgZW50aXR5IG9ubHkgaWY6XG4gICAgICAvLyBDb21wb25lbnQgaXMgaW4gdGhlIHF1ZXJ5XG4gICAgICAvLyBhbmQgRW50aXR5IGhhcyBBTEwgdGhlIGNvbXBvbmVudHMgb2YgdGhlIHF1ZXJ5XG4gICAgICAvLyBhbmQgRW50aXR5IGlzIG5vdCBhbHJlYWR5IGluIHRoZSBxdWVyeVxuICAgICAgaWYgKFxuICAgICAgICAhfnF1ZXJ5LkNvbXBvbmVudHMuaW5kZXhPZihDb21wb25lbnQpIHx8XG4gICAgICAgICFxdWVyeS5tYXRjaChlbnRpdHkpIHx8XG4gICAgICAgIH5xdWVyeS5lbnRpdGllcy5pbmRleE9mKGVudGl0eSlcbiAgICAgIClcbiAgICAgICAgY29udGludWU7XG5cbiAgICAgIHF1ZXJ5LmFkZEVudGl0eShlbnRpdHkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB3aGVuIGEgY29tcG9uZW50IGlzIHJlbW92ZWQgZnJvbSBhbiBlbnRpdHlcbiAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eSBFbnRpdHkgdG8gcmVtb3ZlIHRoZSBjb21wb25lbnQgZnJvbVxuICAgKiBAcGFyYW0ge0NvbXBvbmVudH0gQ29tcG9uZW50IENvbXBvbmVudCB0byByZW1vdmUgZnJvbSB0aGUgZW50aXR5XG4gICAqL1xuICBvbkVudGl0eUNvbXBvbmVudFJlbW92ZWQoZW50aXR5LCBDb21wb25lbnQpIHtcbiAgICBmb3IgKHZhciBxdWVyeU5hbWUgaW4gdGhpcy5fcXVlcmllcykge1xuICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5fcXVlcmllc1txdWVyeU5hbWVdO1xuXG4gICAgICBpZiAoXG4gICAgICAgICEhfnF1ZXJ5Lk5vdENvbXBvbmVudHMuaW5kZXhPZihDb21wb25lbnQpICYmXG4gICAgICAgICF+cXVlcnkuZW50aXRpZXMuaW5kZXhPZihlbnRpdHkpICYmXG4gICAgICAgIHF1ZXJ5Lm1hdGNoKGVudGl0eSlcbiAgICAgICkge1xuICAgICAgICBxdWVyeS5hZGRFbnRpdHkoZW50aXR5KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgISF+cXVlcnkuQ29tcG9uZW50cy5pbmRleE9mKENvbXBvbmVudCkgJiZcbiAgICAgICAgISF+cXVlcnkuZW50aXRpZXMuaW5kZXhPZihlbnRpdHkpICYmXG4gICAgICAgICFxdWVyeS5tYXRjaChlbnRpdHkpXG4gICAgICApIHtcbiAgICAgICAgcXVlcnkucmVtb3ZlRW50aXR5KGVudGl0eSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBxdWVyeSBmb3IgdGhlIHNwZWNpZmllZCBjb21wb25lbnRzXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fSBDb21wb25lbnRzIENvbXBvbmVudHMgdGhhdCB0aGUgcXVlcnkgc2hvdWxkIGhhdmVcbiAgICovXG4gIGdldFF1ZXJ5KENvbXBvbmVudHMpIHtcbiAgICB2YXIga2V5ID0gcXVlcnlLZXkoQ29tcG9uZW50cyk7XG4gICAgdmFyIHF1ZXJ5ID0gdGhpcy5fcXVlcmllc1trZXldO1xuICAgIGlmICghcXVlcnkpIHtcbiAgICAgIHRoaXMuX3F1ZXJpZXNba2V5XSA9IHF1ZXJ5ID0gbmV3IFF1ZXJ5KENvbXBvbmVudHMsIHRoaXMuX3dvcmxkKTtcbiAgICB9XG4gICAgcmV0dXJuIHF1ZXJ5O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBzb21lIHN0YXRzIGZyb20gdGhpcyBjbGFzc1xuICAgKi9cbiAgc3RhdHMoKSB7XG4gICAgdmFyIHN0YXRzID0ge307XG4gICAgZm9yICh2YXIgcXVlcnlOYW1lIGluIHRoaXMuX3F1ZXJpZXMpIHtcbiAgICAgIHN0YXRzW3F1ZXJ5TmFtZV0gPSB0aGlzLl9xdWVyaWVzW3F1ZXJ5TmFtZV0uc3RhdHMoKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXRzO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBpZiAocHJvcHMgIT09IGZhbHNlKSB7XG4gICAgICBjb25zdCBzY2hlbWEgPSB0aGlzLmNvbnN0cnVjdG9yLnNjaGVtYTtcblxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hKSB7XG4gICAgICAgIGlmIChwcm9wcyAmJiBwcm9wcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgdGhpc1trZXldID0gcHJvcHNba2V5XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBzY2hlbWFQcm9wID0gc2NoZW1hW2tleV07XG4gICAgICAgICAgaWYgKHNjaGVtYVByb3AuaGFzT3duUHJvcGVydHkoXCJkZWZhdWx0XCIpKSB7XG4gICAgICAgICAgICB0aGlzW2tleV0gPSBzY2hlbWFQcm9wLnR5cGUuY2xvbmUoc2NoZW1hUHJvcC5kZWZhdWx0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHNjaGVtYVByb3AudHlwZTtcbiAgICAgICAgICAgIHRoaXNba2V5XSA9IHR5cGUuY2xvbmUodHlwZS5kZWZhdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJiBwcm9wcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuY2hlY2tVbmRlZmluZWRBdHRyaWJ1dGVzKHByb3BzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9wb29sID0gbnVsbDtcbiAgfVxuXG4gIGNvcHkoc291cmNlKSB7XG4gICAgY29uc3Qgc2NoZW1hID0gdGhpcy5jb25zdHJ1Y3Rvci5zY2hlbWE7XG5cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEpIHtcbiAgICAgIGNvbnN0IHByb3AgPSBzY2hlbWFba2V5XTtcblxuICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIHRoaXNba2V5XSA9IHByb3AudHlwZS5jb3B5KHNvdXJjZVtrZXldLCB0aGlzW2tleV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEBERUJVR1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgIHRoaXMuY2hlY2tVbmRlZmluZWRBdHRyaWJ1dGVzKHNvdXJjZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMpO1xuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgY29uc3Qgc2NoZW1hID0gdGhpcy5jb25zdHJ1Y3Rvci5zY2hlbWE7XG5cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEpIHtcbiAgICAgIGNvbnN0IHNjaGVtYVByb3AgPSBzY2hlbWFba2V5XTtcblxuICAgICAgaWYgKHNjaGVtYVByb3AuaGFzT3duUHJvcGVydHkoXCJkZWZhdWx0XCIpKSB7XG4gICAgICAgIHRoaXNba2V5XSA9IHNjaGVtYVByb3AudHlwZS5jb3B5KHNjaGVtYVByb3AuZGVmYXVsdCwgdGhpc1trZXldKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBzY2hlbWFQcm9wLnR5cGU7XG4gICAgICAgIHRoaXNba2V5XSA9IHR5cGUuY29weSh0eXBlLmRlZmF1bHQsIHRoaXNba2V5XSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZGlzcG9zZSgpIHtcbiAgICBpZiAodGhpcy5fcG9vbCkge1xuICAgICAgdGhpcy5fcG9vbC5yZWxlYXNlKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIGdldE5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IuZ2V0TmFtZSgpO1xuICB9XG5cbiAgY2hlY2tVbmRlZmluZWRBdHRyaWJ1dGVzKHNyYykge1xuICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuY29uc3RydWN0b3Iuc2NoZW1hO1xuXG4gICAgLy8gQ2hlY2sgdGhhdCB0aGUgYXR0cmlidXRlcyBkZWZpbmVkIGluIHNvdXJjZSBhcmUgYWxzbyBkZWZpbmVkIGluIHRoZSBzY2hlbWFcbiAgICBPYmplY3Qua2V5cyhzcmMpLmZvckVhY2goKHNyY0tleSkgPT4ge1xuICAgICAgaWYgKCFzY2hlbWEuaGFzT3duUHJvcGVydHkoc3JjS2V5KSkge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgYFRyeWluZyB0byBzZXQgYXR0cmlidXRlICcke3NyY0tleX0nIG5vdCBkZWZpbmVkIGluIHRoZSAnJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9JyBzY2hlbWEuIFBsZWFzZSBmaXggdGhlIHNjaGVtYSwgdGhlIGF0dHJpYnV0ZSB2YWx1ZSB3b24ndCBiZSBzZXRgXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuQ29tcG9uZW50LnNjaGVtYSA9IHt9O1xuQ29tcG9uZW50LmlzQ29tcG9uZW50ID0gdHJ1ZTtcbkNvbXBvbmVudC5nZXROYW1lID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5kaXNwbGF5TmFtZSB8fCB0aGlzLm5hbWU7XG59O1xuIiwiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcIi4vQ29tcG9uZW50LmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBTeXN0ZW1TdGF0ZUNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7fVxuXG5TeXN0ZW1TdGF0ZUNvbXBvbmVudC5pc1N5c3RlbVN0YXRlQ29tcG9uZW50ID0gdHJ1ZTtcbiIsImltcG9ydCB7IE9iamVjdFBvb2wgfSBmcm9tIFwiLi9PYmplY3RQb29sLmpzXCI7XG5pbXBvcnQgUXVlcnlNYW5hZ2VyIGZyb20gXCIuL1F1ZXJ5TWFuYWdlci5qc1wiO1xuaW1wb3J0IEV2ZW50RGlzcGF0Y2hlciBmcm9tIFwiLi9FdmVudERpc3BhdGNoZXIuanNcIjtcbmltcG9ydCB7IFN5c3RlbVN0YXRlQ29tcG9uZW50IH0gZnJvbSBcIi4vU3lzdGVtU3RhdGVDb21wb25lbnQuanNcIjtcblxuY2xhc3MgRW50aXR5UG9vbCBleHRlbmRzIE9iamVjdFBvb2wge1xuICBjb25zdHJ1Y3RvcihlbnRpdHlNYW5hZ2VyLCBlbnRpdHlDbGFzcywgaW5pdGlhbFNpemUpIHtcbiAgICBzdXBlcihlbnRpdHlDbGFzcywgdW5kZWZpbmVkKTtcbiAgICB0aGlzLmVudGl0eU1hbmFnZXIgPSBlbnRpdHlNYW5hZ2VyO1xuXG4gICAgaWYgKHR5cGVvZiBpbml0aWFsU2l6ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy5leHBhbmQoaW5pdGlhbFNpemUpO1xuICAgIH1cbiAgfVxuXG4gIGV4cGFuZChjb3VudCkge1xuICAgIGZvciAodmFyIG4gPSAwOyBuIDwgY291bnQ7IG4rKykge1xuICAgICAgdmFyIGNsb25lID0gbmV3IHRoaXMuVCh0aGlzLmVudGl0eU1hbmFnZXIpO1xuICAgICAgY2xvbmUuX3Bvb2wgPSB0aGlzO1xuICAgICAgdGhpcy5mcmVlTGlzdC5wdXNoKGNsb25lKTtcbiAgICB9XG4gICAgdGhpcy5jb3VudCArPSBjb3VudDtcbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgRW50aXR5TWFuYWdlclxuICovXG5leHBvcnQgY2xhc3MgRW50aXR5TWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKHdvcmxkKSB7XG4gICAgdGhpcy53b3JsZCA9IHdvcmxkO1xuICAgIHRoaXMuY29tcG9uZW50c01hbmFnZXIgPSB3b3JsZC5jb21wb25lbnRzTWFuYWdlcjtcblxuICAgIC8vIEFsbCB0aGUgZW50aXRpZXMgaW4gdGhpcyBpbnN0YW5jZVxuICAgIHRoaXMuX2VudGl0aWVzID0gW107XG4gICAgdGhpcy5fbmV4dEVudGl0eUlkID0gMDtcblxuICAgIHRoaXMuX2VudGl0aWVzQnlOYW1lcyA9IHt9O1xuXG4gICAgdGhpcy5fcXVlcnlNYW5hZ2VyID0gbmV3IFF1ZXJ5TWFuYWdlcih0aGlzKTtcbiAgICB0aGlzLmV2ZW50RGlzcGF0Y2hlciA9IG5ldyBFdmVudERpc3BhdGNoZXIoKTtcbiAgICB0aGlzLl9lbnRpdHlQb29sID0gbmV3IEVudGl0eVBvb2woXG4gICAgICB0aGlzLFxuICAgICAgdGhpcy53b3JsZC5vcHRpb25zLmVudGl0eUNsYXNzLFxuICAgICAgdGhpcy53b3JsZC5vcHRpb25zLmVudGl0eVBvb2xTaXplXG4gICAgKTtcblxuICAgIC8vIERlZmVycmVkIGRlbGV0aW9uXG4gICAgdGhpcy5lbnRpdGllc1dpdGhDb21wb25lbnRzVG9SZW1vdmUgPSBbXTtcbiAgICB0aGlzLmVudGl0aWVzVG9SZW1vdmUgPSBbXTtcbiAgICB0aGlzLmRlZmVycmVkUmVtb3ZhbEVuYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgZ2V0RW50aXR5QnlOYW1lKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5fZW50aXRpZXNCeU5hbWVzW25hbWVdO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBlbnRpdHlcbiAgICovXG4gIGNyZWF0ZUVudGl0eShuYW1lKSB7XG4gICAgdmFyIGVudGl0eSA9IHRoaXMuX2VudGl0eVBvb2wuYWNxdWlyZSgpO1xuICAgIGVudGl0eS5hbGl2ZSA9IHRydWU7XG4gICAgZW50aXR5Lm5hbWUgPSBuYW1lIHx8IFwiXCI7XG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIGlmICh0aGlzLl9lbnRpdGllc0J5TmFtZXNbbmFtZV0pIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBFbnRpdHkgbmFtZSAnJHtuYW1lfScgYWxyZWFkeSBleGlzdGApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZW50aXRpZXNCeU5hbWVzW25hbWVdID0gZW50aXR5O1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2VudGl0aWVzLnB1c2goZW50aXR5KTtcbiAgICB0aGlzLmV2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KEVOVElUWV9DUkVBVEVELCBlbnRpdHkpO1xuICAgIHJldHVybiBlbnRpdHk7XG4gIH1cblxuICAvLyBDT01QT05FTlRTXG5cbiAgLyoqXG4gICAqIEFkZCBhIGNvbXBvbmVudCB0byBhbiBlbnRpdHlcbiAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eSBFbnRpdHkgd2hlcmUgdGhlIGNvbXBvbmVudCB3aWxsIGJlIGFkZGVkXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fSBDb21wb25lbnQgQ29tcG9uZW50IHRvIGJlIGFkZGVkIHRvIHRoZSBlbnRpdHlcbiAgICogQHBhcmFtIHtPYmplY3R9IHZhbHVlcyBPcHRpb25hbCB2YWx1ZXMgdG8gcmVwbGFjZSB0aGUgZGVmYXVsdCBhdHRyaWJ1dGVzXG4gICAqL1xuICBlbnRpdHlBZGRDb21wb25lbnQoZW50aXR5LCBDb21wb25lbnQsIHZhbHVlcykge1xuICAgIC8vIEB0b2RvIFByb2JhYmx5IGRlZmluZSBDb21wb25lbnQuX3R5cGVJZCB3aXRoIGEgZGVmYXVsdCB2YWx1ZSBhbmQgYXZvaWQgdXNpbmcgdHlwZW9mXG4gICAgaWYgKFxuICAgICAgdHlwZW9mIENvbXBvbmVudC5fdHlwZUlkID09PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAhdGhpcy53b3JsZC5jb21wb25lbnRzTWFuYWdlci5fQ29tcG9uZW50c01hcFtDb21wb25lbnQuX3R5cGVJZF1cbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEF0dGVtcHRlZCB0byBhZGQgdW5yZWdpc3RlcmVkIGNvbXBvbmVudCBcIiR7Q29tcG9uZW50LmdldE5hbWUoKX1cImBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKH5lbnRpdHkuX0NvbXBvbmVudFR5cGVzLmluZGV4T2YoQ29tcG9uZW50KSkge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgXCJDb21wb25lbnQgdHlwZSBhbHJlYWR5IGV4aXN0cyBvbiBlbnRpdHkuXCIsXG4gICAgICAgICAgZW50aXR5LFxuICAgICAgICAgIENvbXBvbmVudC5nZXROYW1lKClcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlbnRpdHkuX0NvbXBvbmVudFR5cGVzLnB1c2goQ29tcG9uZW50KTtcblxuICAgIGlmIChDb21wb25lbnQuX19wcm90b19fID09PSBTeXN0ZW1TdGF0ZUNvbXBvbmVudCkge1xuICAgICAgZW50aXR5Lm51bVN0YXRlQ29tcG9uZW50cysrO1xuICAgIH1cblxuICAgIHZhciBjb21wb25lbnRQb29sID0gdGhpcy53b3JsZC5jb21wb25lbnRzTWFuYWdlci5nZXRDb21wb25lbnRzUG9vbChcbiAgICAgIENvbXBvbmVudFxuICAgICk7XG5cbiAgICB2YXIgY29tcG9uZW50ID0gY29tcG9uZW50UG9vbFxuICAgICAgPyBjb21wb25lbnRQb29sLmFjcXVpcmUoKVxuICAgICAgOiBuZXcgQ29tcG9uZW50KHZhbHVlcyk7XG5cbiAgICBpZiAoY29tcG9uZW50UG9vbCAmJiB2YWx1ZXMpIHtcbiAgICAgIGNvbXBvbmVudC5jb3B5KHZhbHVlcyk7XG4gICAgfVxuXG4gICAgZW50aXR5Ll9jb21wb25lbnRzW0NvbXBvbmVudC5fdHlwZUlkXSA9IGNvbXBvbmVudDtcblxuICAgIHRoaXMuX3F1ZXJ5TWFuYWdlci5vbkVudGl0eUNvbXBvbmVudEFkZGVkKGVudGl0eSwgQ29tcG9uZW50KTtcbiAgICB0aGlzLndvcmxkLmNvbXBvbmVudHNNYW5hZ2VyLmNvbXBvbmVudEFkZGVkVG9FbnRpdHkoQ29tcG9uZW50KTtcblxuICAgIHRoaXMuZXZlbnREaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQoQ09NUE9ORU5UX0FEREVELCBlbnRpdHksIENvbXBvbmVudCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGEgY29tcG9uZW50IGZyb20gYW4gZW50aXR5XG4gICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHkgRW50aXR5IHdoaWNoIHdpbGwgZ2V0IHJlbW92ZWQgdGhlIGNvbXBvbmVudFxuICAgKiBAcGFyYW0geyp9IENvbXBvbmVudCBDb21wb25lbnQgdG8gcmVtb3ZlIGZyb20gdGhlIGVudGl0eVxuICAgKiBAcGFyYW0ge0Jvb2x9IGltbWVkaWF0ZWx5IElmIHlvdSB3YW50IHRvIHJlbW92ZSB0aGUgY29tcG9uZW50IGltbWVkaWF0ZWx5IGluc3RlYWQgb2YgZGVmZXJyZWQgKERlZmF1bHQgaXMgZmFsc2UpXG4gICAqL1xuICBlbnRpdHlSZW1vdmVDb21wb25lbnQoZW50aXR5LCBDb21wb25lbnQsIGltbWVkaWF0ZWx5KSB7XG4gICAgdmFyIGluZGV4ID0gZW50aXR5Ll9Db21wb25lbnRUeXBlcy5pbmRleE9mKENvbXBvbmVudCk7XG4gICAgaWYgKCF+aW5kZXgpIHJldHVybjtcblxuICAgIHRoaXMuZXZlbnREaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQoQ09NUE9ORU5UX1JFTU9WRSwgZW50aXR5LCBDb21wb25lbnQpO1xuXG4gICAgaWYgKGltbWVkaWF0ZWx5KSB7XG4gICAgICB0aGlzLl9lbnRpdHlSZW1vdmVDb21wb25lbnRTeW5jKGVudGl0eSwgQ29tcG9uZW50LCBpbmRleCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChlbnRpdHkuX0NvbXBvbmVudFR5cGVzVG9SZW1vdmUubGVuZ3RoID09PSAwKVxuICAgICAgICB0aGlzLmVudGl0aWVzV2l0aENvbXBvbmVudHNUb1JlbW92ZS5wdXNoKGVudGl0eSk7XG5cbiAgICAgIGVudGl0eS5fQ29tcG9uZW50VHlwZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIGVudGl0eS5fQ29tcG9uZW50VHlwZXNUb1JlbW92ZS5wdXNoKENvbXBvbmVudCk7XG5cbiAgICAgIGVudGl0eS5fY29tcG9uZW50c1RvUmVtb3ZlW0NvbXBvbmVudC5fdHlwZUlkXSA9XG4gICAgICAgIGVudGl0eS5fY29tcG9uZW50c1tDb21wb25lbnQuX3R5cGVJZF07XG4gICAgICBkZWxldGUgZW50aXR5Ll9jb21wb25lbnRzW0NvbXBvbmVudC5fdHlwZUlkXTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBlYWNoIGluZGV4ZWQgcXVlcnkgdG8gc2VlIGlmIHdlIG5lZWQgdG8gcmVtb3ZlIGl0XG4gICAgdGhpcy5fcXVlcnlNYW5hZ2VyLm9uRW50aXR5Q29tcG9uZW50UmVtb3ZlZChlbnRpdHksIENvbXBvbmVudCk7XG5cbiAgICBpZiAoQ29tcG9uZW50Ll9fcHJvdG9fXyA9PT0gU3lzdGVtU3RhdGVDb21wb25lbnQpIHtcbiAgICAgIGVudGl0eS5udW1TdGF0ZUNvbXBvbmVudHMtLTtcblxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGVudGl0eSB3YXMgYSBnaG9zdCB3YWl0aW5nIGZvciB0aGUgbGFzdCBzeXN0ZW0gc3RhdGUgY29tcG9uZW50IHRvIGJlIHJlbW92ZWRcbiAgICAgIGlmIChlbnRpdHkubnVtU3RhdGVDb21wb25lbnRzID09PSAwICYmICFlbnRpdHkuYWxpdmUpIHtcbiAgICAgICAgZW50aXR5LnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9lbnRpdHlSZW1vdmVDb21wb25lbnRTeW5jKGVudGl0eSwgQ29tcG9uZW50LCBpbmRleCkge1xuICAgIC8vIFJlbW92ZSBUIGxpc3Rpbmcgb24gZW50aXR5IGFuZCBwcm9wZXJ0eSByZWYsIHRoZW4gZnJlZSB0aGUgY29tcG9uZW50LlxuICAgIGVudGl0eS5fQ29tcG9uZW50VHlwZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB2YXIgY29tcG9uZW50ID0gZW50aXR5Ll9jb21wb25lbnRzW0NvbXBvbmVudC5fdHlwZUlkXTtcbiAgICBkZWxldGUgZW50aXR5Ll9jb21wb25lbnRzW0NvbXBvbmVudC5fdHlwZUlkXTtcbiAgICBjb21wb25lbnQuZGlzcG9zZSgpO1xuICAgIHRoaXMud29ybGQuY29tcG9uZW50c01hbmFnZXIuY29tcG9uZW50UmVtb3ZlZEZyb21FbnRpdHkoQ29tcG9uZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIHRoZSBjb21wb25lbnRzIGZyb20gYW4gZW50aXR5XG4gICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHkgRW50aXR5IGZyb20gd2hpY2ggdGhlIGNvbXBvbmVudHMgd2lsbCBiZSByZW1vdmVkXG4gICAqL1xuICBlbnRpdHlSZW1vdmVBbGxDb21wb25lbnRzKGVudGl0eSwgaW1tZWRpYXRlbHkpIHtcbiAgICBsZXQgQ29tcG9uZW50cyA9IGVudGl0eS5fQ29tcG9uZW50VHlwZXM7XG5cbiAgICBmb3IgKGxldCBqID0gQ29tcG9uZW50cy5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgaWYgKENvbXBvbmVudHNbal0uX19wcm90b19fICE9PSBTeXN0ZW1TdGF0ZUNvbXBvbmVudClcbiAgICAgICAgdGhpcy5lbnRpdHlSZW1vdmVDb21wb25lbnQoZW50aXR5LCBDb21wb25lbnRzW2pdLCBpbW1lZGlhdGVseSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgZW50aXR5IGZyb20gdGhpcyBtYW5hZ2VyLiBJdCB3aWxsIGNsZWFyIGFsc28gaXRzIGNvbXBvbmVudHNcbiAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eSBFbnRpdHkgdG8gcmVtb3ZlIGZyb20gdGhlIG1hbmFnZXJcbiAgICogQHBhcmFtIHtCb29sfSBpbW1lZGlhdGVseSBJZiB5b3Ugd2FudCB0byByZW1vdmUgdGhlIGNvbXBvbmVudCBpbW1lZGlhdGVseSBpbnN0ZWFkIG9mIGRlZmVycmVkIChEZWZhdWx0IGlzIGZhbHNlKVxuICAgKi9cbiAgcmVtb3ZlRW50aXR5KGVudGl0eSwgaW1tZWRpYXRlbHkpIHtcbiAgICB2YXIgaW5kZXggPSB0aGlzLl9lbnRpdGllcy5pbmRleE9mKGVudGl0eSk7XG5cbiAgICBpZiAoIX5pbmRleCkgdGhyb3cgbmV3IEVycm9yKFwiVHJpZWQgdG8gcmVtb3ZlIGVudGl0eSBub3QgaW4gbGlzdFwiKTtcblxuICAgIGVudGl0eS5hbGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuZW50aXR5UmVtb3ZlQWxsQ29tcG9uZW50cyhlbnRpdHksIGltbWVkaWF0ZWx5KTtcblxuICAgIGlmIChlbnRpdHkubnVtU3RhdGVDb21wb25lbnRzID09PSAwKSB7XG4gICAgICAvLyBSZW1vdmUgZnJvbSBlbnRpdHkgbGlzdFxuICAgICAgdGhpcy5ldmVudERpc3BhdGNoZXIuZGlzcGF0Y2hFdmVudChFTlRJVFlfUkVNT1ZFRCwgZW50aXR5KTtcbiAgICAgIHRoaXMuX3F1ZXJ5TWFuYWdlci5vbkVudGl0eVJlbW92ZWQoZW50aXR5KTtcbiAgICAgIGlmIChpbW1lZGlhdGVseSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLl9yZWxlYXNlRW50aXR5KGVudGl0eSwgaW5kZXgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5lbnRpdGllc1RvUmVtb3ZlLnB1c2goZW50aXR5KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfcmVsZWFzZUVudGl0eShlbnRpdHksIGluZGV4KSB7XG4gICAgdGhpcy5fZW50aXRpZXMuc3BsaWNlKGluZGV4LCAxKTtcblxuICAgIGlmICh0aGlzLl9lbnRpdGllc0J5TmFtZXNbZW50aXR5Lm5hbWVdKSB7XG4gICAgICBkZWxldGUgdGhpcy5fZW50aXRpZXNCeU5hbWVzW2VudGl0eS5uYW1lXTtcbiAgICB9XG4gICAgZW50aXR5Ll9wb29sLnJlbGVhc2UoZW50aXR5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIGVudGl0aWVzIGZyb20gdGhpcyBtYW5hZ2VyXG4gICAqL1xuICByZW1vdmVBbGxFbnRpdGllcygpIHtcbiAgICBmb3IgKHZhciBpID0gdGhpcy5fZW50aXRpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHRoaXMucmVtb3ZlRW50aXR5KHRoaXMuX2VudGl0aWVzW2ldKTtcbiAgICB9XG4gIH1cblxuICBwcm9jZXNzRGVmZXJyZWRSZW1vdmFsKCkge1xuICAgIGlmICghdGhpcy5kZWZlcnJlZFJlbW92YWxFbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVudGl0aWVzVG9SZW1vdmUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBlbnRpdHkgPSB0aGlzLmVudGl0aWVzVG9SZW1vdmVbaV07XG4gICAgICBsZXQgaW5kZXggPSB0aGlzLl9lbnRpdGllcy5pbmRleE9mKGVudGl0eSk7XG4gICAgICB0aGlzLl9yZWxlYXNlRW50aXR5KGVudGl0eSwgaW5kZXgpO1xuICAgIH1cbiAgICB0aGlzLmVudGl0aWVzVG9SZW1vdmUubGVuZ3RoID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5lbnRpdGllc1dpdGhDb21wb25lbnRzVG9SZW1vdmUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBlbnRpdHkgPSB0aGlzLmVudGl0aWVzV2l0aENvbXBvbmVudHNUb1JlbW92ZVtpXTtcbiAgICAgIHdoaWxlIChlbnRpdHkuX0NvbXBvbmVudFR5cGVzVG9SZW1vdmUubGVuZ3RoID4gMCkge1xuICAgICAgICBsZXQgQ29tcG9uZW50ID0gZW50aXR5Ll9Db21wb25lbnRUeXBlc1RvUmVtb3ZlLnBvcCgpO1xuXG4gICAgICAgIHZhciBjb21wb25lbnQgPSBlbnRpdHkuX2NvbXBvbmVudHNUb1JlbW92ZVtDb21wb25lbnQuX3R5cGVJZF07XG4gICAgICAgIGRlbGV0ZSBlbnRpdHkuX2NvbXBvbmVudHNUb1JlbW92ZVtDb21wb25lbnQuX3R5cGVJZF07XG4gICAgICAgIGNvbXBvbmVudC5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMud29ybGQuY29tcG9uZW50c01hbmFnZXIuY29tcG9uZW50UmVtb3ZlZEZyb21FbnRpdHkoQ29tcG9uZW50KTtcblxuICAgICAgICAvL3RoaXMuX2VudGl0eVJlbW92ZUNvbXBvbmVudFN5bmMoZW50aXR5LCBDb21wb25lbnQsIGluZGV4KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmVudGl0aWVzV2l0aENvbXBvbmVudHNUb1JlbW92ZS5sZW5ndGggPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIHF1ZXJ5IGJhc2VkIG9uIGEgbGlzdCBvZiBjb21wb25lbnRzXG4gICAqIEBwYXJhbSB7QXJyYXkoQ29tcG9uZW50KX0gQ29tcG9uZW50cyBMaXN0IG9mIGNvbXBvbmVudHMgdGhhdCB3aWxsIGZvcm0gdGhlIHF1ZXJ5XG4gICAqL1xuICBxdWVyeUNvbXBvbmVudHMoQ29tcG9uZW50cykge1xuICAgIHJldHVybiB0aGlzLl9xdWVyeU1hbmFnZXIuZ2V0UXVlcnkoQ29tcG9uZW50cyk7XG4gIH1cblxuICAvLyBFWFRSQVNcblxuICAvKipcbiAgICogUmV0dXJuIG51bWJlciBvZiBlbnRpdGllc1xuICAgKi9cbiAgY291bnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VudGl0aWVzLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gc29tZSBzdGF0c1xuICAgKi9cbiAgc3RhdHMoKSB7XG4gICAgdmFyIHN0YXRzID0ge1xuICAgICAgbnVtRW50aXRpZXM6IHRoaXMuX2VudGl0aWVzLmxlbmd0aCxcbiAgICAgIG51bVF1ZXJpZXM6IE9iamVjdC5rZXlzKHRoaXMuX3F1ZXJ5TWFuYWdlci5fcXVlcmllcykubGVuZ3RoLFxuICAgICAgcXVlcmllczogdGhpcy5fcXVlcnlNYW5hZ2VyLnN0YXRzKCksXG4gICAgICBudW1Db21wb25lbnRQb29sOiBPYmplY3Qua2V5cyh0aGlzLmNvbXBvbmVudHNNYW5hZ2VyLl9jb21wb25lbnRQb29sKVxuICAgICAgICAubGVuZ3RoLFxuICAgICAgY29tcG9uZW50UG9vbDoge30sXG4gICAgICBldmVudERpc3BhdGNoZXI6IHRoaXMuZXZlbnREaXNwYXRjaGVyLnN0YXRzLFxuICAgIH07XG5cbiAgICBmb3IgKHZhciBlY3N5Q29tcG9uZW50SWQgaW4gdGhpcy5jb21wb25lbnRzTWFuYWdlci5fY29tcG9uZW50UG9vbCkge1xuICAgICAgdmFyIHBvb2wgPSB0aGlzLmNvbXBvbmVudHNNYW5hZ2VyLl9jb21wb25lbnRQb29sW2Vjc3lDb21wb25lbnRJZF07XG4gICAgICBzdGF0cy5jb21wb25lbnRQb29sW3Bvb2wuVC5nZXROYW1lKCldID0ge1xuICAgICAgICB1c2VkOiBwb29sLnRvdGFsVXNlZCgpLFxuICAgICAgICBzaXplOiBwb29sLmNvdW50LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RhdHM7XG4gIH1cbn1cblxuY29uc3QgRU5USVRZX0NSRUFURUQgPSBcIkVudGl0eU1hbmFnZXIjRU5USVRZX0NSRUFURVwiO1xuY29uc3QgRU5USVRZX1JFTU9WRUQgPSBcIkVudGl0eU1hbmFnZXIjRU5USVRZX1JFTU9WRURcIjtcbmNvbnN0IENPTVBPTkVOVF9BRERFRCA9IFwiRW50aXR5TWFuYWdlciNDT01QT05FTlRfQURERURcIjtcbmNvbnN0IENPTVBPTkVOVF9SRU1PVkUgPSBcIkVudGl0eU1hbmFnZXIjQ09NUE9ORU5UX1JFTU9WRVwiO1xuIiwiaW1wb3J0IHsgT2JqZWN0UG9vbCB9IGZyb20gXCIuL09iamVjdFBvb2wuanNcIjtcblxuZXhwb3J0IGNsYXNzIENvbXBvbmVudE1hbmFnZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLkNvbXBvbmVudHMgPSBbXTtcbiAgICB0aGlzLl9Db21wb25lbnRzTWFwID0ge307XG5cbiAgICB0aGlzLl9jb21wb25lbnRQb29sID0ge307XG4gICAgdGhpcy5udW1Db21wb25lbnRzID0ge307XG4gICAgdGhpcy5uZXh0Q29tcG9uZW50SWQgPSAwO1xuICB9XG5cbiAgaGFzQ29tcG9uZW50KENvbXBvbmVudCkge1xuICAgIHJldHVybiB0aGlzLkNvbXBvbmVudHMuaW5kZXhPZihDb21wb25lbnQpICE9PSAtMTtcbiAgfVxuXG4gIHJlZ2lzdGVyQ29tcG9uZW50KENvbXBvbmVudCwgb2JqZWN0UG9vbCkge1xuICAgIGlmICh0aGlzLkNvbXBvbmVudHMuaW5kZXhPZihDb21wb25lbnQpICE9PSAtMSkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgQ29tcG9uZW50IHR5cGU6ICcke0NvbXBvbmVudC5nZXROYW1lKCl9JyBhbHJlYWR5IHJlZ2lzdGVyZWQuYFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzY2hlbWEgPSBDb21wb25lbnQuc2NoZW1hO1xuXG4gICAgaWYgKCFzY2hlbWEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENvbXBvbmVudCBcIiR7Q29tcG9uZW50LmdldE5hbWUoKX1cIiBoYXMgbm8gc2NoZW1hIHByb3BlcnR5LmBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBwcm9wTmFtZSBpbiBzY2hlbWEpIHtcbiAgICAgIGNvbnN0IHByb3AgPSBzY2hlbWFbcHJvcE5hbWVdO1xuXG4gICAgICBpZiAoIXByb3AudHlwZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEludmFsaWQgc2NoZW1hIGZvciBjb21wb25lbnQgXCIke0NvbXBvbmVudC5nZXROYW1lKCl9XCIuIE1pc3NpbmcgdHlwZSBmb3IgXCIke3Byb3BOYW1lfVwiIHByb3BlcnR5LmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBDb21wb25lbnQuX3R5cGVJZCA9IHRoaXMubmV4dENvbXBvbmVudElkKys7XG4gICAgdGhpcy5Db21wb25lbnRzLnB1c2goQ29tcG9uZW50KTtcbiAgICB0aGlzLl9Db21wb25lbnRzTWFwW0NvbXBvbmVudC5fdHlwZUlkXSA9IENvbXBvbmVudDtcbiAgICB0aGlzLm51bUNvbXBvbmVudHNbQ29tcG9uZW50Ll90eXBlSWRdID0gMDtcblxuICAgIGlmIChvYmplY3RQb29sID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG9iamVjdFBvb2wgPSBuZXcgT2JqZWN0UG9vbChDb21wb25lbnQpO1xuICAgIH0gZWxzZSBpZiAob2JqZWN0UG9vbCA9PT0gZmFsc2UpIHtcbiAgICAgIG9iamVjdFBvb2wgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgdGhpcy5fY29tcG9uZW50UG9vbFtDb21wb25lbnQuX3R5cGVJZF0gPSBvYmplY3RQb29sO1xuICB9XG5cbiAgY29tcG9uZW50QWRkZWRUb0VudGl0eShDb21wb25lbnQpIHtcbiAgICB0aGlzLm51bUNvbXBvbmVudHNbQ29tcG9uZW50Ll90eXBlSWRdKys7XG4gIH1cblxuICBjb21wb25lbnRSZW1vdmVkRnJvbUVudGl0eShDb21wb25lbnQpIHtcbiAgICB0aGlzLm51bUNvbXBvbmVudHNbQ29tcG9uZW50Ll90eXBlSWRdLS07XG4gIH1cblxuICBnZXRDb21wb25lbnRzUG9vbChDb21wb25lbnQpIHtcbiAgICByZXR1cm4gdGhpcy5fY29tcG9uZW50UG9vbFtDb21wb25lbnQuX3R5cGVJZF07XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBWZXJzaW9uID0gXCIwLjMuMVwiO1xuIiwiaW1wb3J0IFF1ZXJ5IGZyb20gXCIuL1F1ZXJ5LmpzXCI7XG5pbXBvcnQgd3JhcEltbXV0YWJsZUNvbXBvbmVudCBmcm9tIFwiLi9XcmFwSW1tdXRhYmxlQ29tcG9uZW50LmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBFbnRpdHkge1xuICBjb25zdHJ1Y3RvcihlbnRpdHlNYW5hZ2VyKSB7XG4gICAgdGhpcy5fZW50aXR5TWFuYWdlciA9IGVudGl0eU1hbmFnZXIgfHwgbnVsbDtcblxuICAgIC8vIFVuaXF1ZSBJRCBmb3IgdGhpcyBlbnRpdHlcbiAgICB0aGlzLmlkID0gZW50aXR5TWFuYWdlci5fbmV4dEVudGl0eUlkKys7XG5cbiAgICAvLyBMaXN0IG9mIGNvbXBvbmVudHMgdHlwZXMgdGhlIGVudGl0eSBoYXNcbiAgICB0aGlzLl9Db21wb25lbnRUeXBlcyA9IFtdO1xuXG4gICAgLy8gSW5zdGFuY2Ugb2YgdGhlIGNvbXBvbmVudHNcbiAgICB0aGlzLl9jb21wb25lbnRzID0ge307XG5cbiAgICB0aGlzLl9jb21wb25lbnRzVG9SZW1vdmUgPSB7fTtcblxuICAgIC8vIFF1ZXJpZXMgd2hlcmUgdGhlIGVudGl0eSBpcyBhZGRlZFxuICAgIHRoaXMucXVlcmllcyA9IFtdO1xuXG4gICAgLy8gVXNlZCBmb3IgZGVmZXJyZWQgcmVtb3ZhbFxuICAgIHRoaXMuX0NvbXBvbmVudFR5cGVzVG9SZW1vdmUgPSBbXTtcblxuICAgIHRoaXMuYWxpdmUgPSBmYWxzZTtcblxuICAgIC8vaWYgdGhlcmUgYXJlIHN0YXRlIGNvbXBvbmVudHMgb24gYSBlbnRpdHksIGl0IGNhbid0IGJlIHJlbW92ZWQgY29tcGxldGVseVxuICAgIHRoaXMubnVtU3RhdGVDb21wb25lbnRzID0gMDtcbiAgfVxuXG4gIC8vIENPTVBPTkVOVFNcblxuICBnZXRDb21wb25lbnQoQ29tcG9uZW50LCBpbmNsdWRlUmVtb3ZlZCkge1xuICAgIHZhciBjb21wb25lbnQgPSB0aGlzLl9jb21wb25lbnRzW0NvbXBvbmVudC5fdHlwZUlkXTtcblxuICAgIGlmICghY29tcG9uZW50ICYmIGluY2x1ZGVSZW1vdmVkID09PSB0cnVlKSB7XG4gICAgICBjb21wb25lbnQgPSB0aGlzLl9jb21wb25lbnRzVG9SZW1vdmVbQ29tcG9uZW50Ll90eXBlSWRdO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCJcbiAgICAgID8gd3JhcEltbXV0YWJsZUNvbXBvbmVudChDb21wb25lbnQsIGNvbXBvbmVudClcbiAgICAgIDogY29tcG9uZW50O1xuICB9XG5cbiAgZ2V0UmVtb3ZlZENvbXBvbmVudChDb21wb25lbnQpIHtcbiAgICBjb25zdCBjb21wb25lbnQgPSB0aGlzLl9jb21wb25lbnRzVG9SZW1vdmVbQ29tcG9uZW50Ll90eXBlSWRdO1xuXG4gICAgcmV0dXJuIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIlxuICAgICAgPyB3cmFwSW1tdXRhYmxlQ29tcG9uZW50KENvbXBvbmVudCwgY29tcG9uZW50KVxuICAgICAgOiBjb21wb25lbnQ7XG4gIH1cblxuICBnZXRDb21wb25lbnRzKCkge1xuICAgIHJldHVybiB0aGlzLl9jb21wb25lbnRzO1xuICB9XG5cbiAgZ2V0Q29tcG9uZW50c1RvUmVtb3ZlKCkge1xuICAgIHJldHVybiB0aGlzLl9jb21wb25lbnRzVG9SZW1vdmU7XG4gIH1cblxuICBnZXRDb21wb25lbnRUeXBlcygpIHtcbiAgICByZXR1cm4gdGhpcy5fQ29tcG9uZW50VHlwZXM7XG4gIH1cblxuICBnZXRNdXRhYmxlQ29tcG9uZW50KENvbXBvbmVudCkge1xuICAgIHZhciBjb21wb25lbnQgPSB0aGlzLl9jb21wb25lbnRzW0NvbXBvbmVudC5fdHlwZUlkXTtcblxuICAgIGlmICghY29tcG9uZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnF1ZXJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBxdWVyeSA9IHRoaXMucXVlcmllc1tpXTtcbiAgICAgIC8vIEB0b2RvIGFjY2VsZXJhdGUgdGhpcyBjaGVjay4gTWF5YmUgaGF2aW5nIHF1ZXJ5Ll9Db21wb25lbnRzIGFzIGFuIG9iamVjdFxuICAgICAgLy8gQHRvZG8gYWRkIE5vdCBjb21wb25lbnRzXG4gICAgICBpZiAocXVlcnkucmVhY3RpdmUgJiYgcXVlcnkuQ29tcG9uZW50cy5pbmRleE9mKENvbXBvbmVudCkgIT09IC0xKSB7XG4gICAgICAgIHF1ZXJ5LmV2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgIFF1ZXJ5LnByb3RvdHlwZS5DT01QT05FTlRfQ0hBTkdFRCxcbiAgICAgICAgICB0aGlzLFxuICAgICAgICAgIGNvbXBvbmVudFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29tcG9uZW50O1xuICB9XG5cbiAgYWRkQ29tcG9uZW50KENvbXBvbmVudCwgdmFsdWVzKSB7XG4gICAgdGhpcy5fZW50aXR5TWFuYWdlci5lbnRpdHlBZGRDb21wb25lbnQodGhpcywgQ29tcG9uZW50LCB2YWx1ZXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcmVtb3ZlQ29tcG9uZW50KENvbXBvbmVudCwgZm9yY2VJbW1lZGlhdGUpIHtcbiAgICB0aGlzLl9lbnRpdHlNYW5hZ2VyLmVudGl0eVJlbW92ZUNvbXBvbmVudCh0aGlzLCBDb21wb25lbnQsIGZvcmNlSW1tZWRpYXRlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGhhc0NvbXBvbmVudChDb21wb25lbnQsIGluY2x1ZGVSZW1vdmVkKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICEhfnRoaXMuX0NvbXBvbmVudFR5cGVzLmluZGV4T2YoQ29tcG9uZW50KSB8fFxuICAgICAgKGluY2x1ZGVSZW1vdmVkID09PSB0cnVlICYmIHRoaXMuaGFzUmVtb3ZlZENvbXBvbmVudChDb21wb25lbnQpKVxuICAgICk7XG4gIH1cblxuICBoYXNSZW1vdmVkQ29tcG9uZW50KENvbXBvbmVudCkge1xuICAgIHJldHVybiAhIX50aGlzLl9Db21wb25lbnRUeXBlc1RvUmVtb3ZlLmluZGV4T2YoQ29tcG9uZW50KTtcbiAgfVxuXG4gIGhhc0FsbENvbXBvbmVudHMoQ29tcG9uZW50cykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ29tcG9uZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCF0aGlzLmhhc0NvbXBvbmVudChDb21wb25lbnRzW2ldKSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGhhc0FueUNvbXBvbmVudHMoQ29tcG9uZW50cykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ29tcG9uZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuaGFzQ29tcG9uZW50KENvbXBvbmVudHNbaV0pKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmVtb3ZlQWxsQ29tcG9uZW50cyhmb3JjZUltbWVkaWF0ZSkge1xuICAgIHJldHVybiB0aGlzLl9lbnRpdHlNYW5hZ2VyLmVudGl0eVJlbW92ZUFsbENvbXBvbmVudHModGhpcywgZm9yY2VJbW1lZGlhdGUpO1xuICB9XG5cbiAgY29weShzcmMpIHtcbiAgICAvLyBUT0RPOiBUaGlzIGNhbiBkZWZpbml0ZWx5IGJlIG9wdGltaXplZFxuICAgIGZvciAodmFyIGVjc3lDb21wb25lbnRJZCBpbiBzcmMuX2NvbXBvbmVudHMpIHtcbiAgICAgIHZhciBzcmNDb21wb25lbnQgPSBzcmMuX2NvbXBvbmVudHNbZWNzeUNvbXBvbmVudElkXTtcbiAgICAgIHRoaXMuYWRkQ29tcG9uZW50KHNyY0NvbXBvbmVudC5jb25zdHJ1Y3Rvcik7XG4gICAgICB2YXIgY29tcG9uZW50ID0gdGhpcy5nZXRDb21wb25lbnQoc3JjQ29tcG9uZW50LmNvbnN0cnVjdG9yKTtcbiAgICAgIGNvbXBvbmVudC5jb3B5KHNyY0NvbXBvbmVudCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IEVudGl0eSh0aGlzLl9lbnRpdHlNYW5hZ2VyKS5jb3B5KHRoaXMpO1xuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5pZCA9IHRoaXMuX2VudGl0eU1hbmFnZXIuX25leHRFbnRpdHlJZCsrO1xuICAgIHRoaXMuX0NvbXBvbmVudFR5cGVzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5xdWVyaWVzLmxlbmd0aCA9IDA7XG5cbiAgICBmb3IgKHZhciBlY3N5Q29tcG9uZW50SWQgaW4gdGhpcy5fY29tcG9uZW50cykge1xuICAgICAgZGVsZXRlIHRoaXMuX2NvbXBvbmVudHNbZWNzeUNvbXBvbmVudElkXTtcbiAgICB9XG4gIH1cblxuICByZW1vdmUoZm9yY2VJbW1lZGlhdGUpIHtcbiAgICByZXR1cm4gdGhpcy5fZW50aXR5TWFuYWdlci5yZW1vdmVFbnRpdHkodGhpcywgZm9yY2VJbW1lZGlhdGUpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBTeXN0ZW1NYW5hZ2VyIH0gZnJvbSBcIi4vU3lzdGVtTWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgRW50aXR5TWFuYWdlciB9IGZyb20gXCIuL0VudGl0eU1hbmFnZXIuanNcIjtcbmltcG9ydCB7IENvbXBvbmVudE1hbmFnZXIgfSBmcm9tIFwiLi9Db21wb25lbnRNYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBWZXJzaW9uIH0gZnJvbSBcIi4vVmVyc2lvbi5qc1wiO1xuaW1wb3J0IHsgaGFzV2luZG93LCBub3cgfSBmcm9tIFwiLi9VdGlscy5qc1wiO1xuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSBcIi4vRW50aXR5LmpzXCI7XG5cbmNvbnN0IERFRkFVTFRfT1BUSU9OUyA9IHtcbiAgZW50aXR5UG9vbFNpemU6IDAsXG4gIGVudGl0eUNsYXNzOiBFbnRpdHksXG59O1xuXG5leHBvcnQgY2xhc3MgV29ybGQge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX09QVElPTlMsIG9wdGlvbnMpO1xuXG4gICAgdGhpcy5jb21wb25lbnRzTWFuYWdlciA9IG5ldyBDb21wb25lbnRNYW5hZ2VyKHRoaXMpO1xuICAgIHRoaXMuZW50aXR5TWFuYWdlciA9IG5ldyBFbnRpdHlNYW5hZ2VyKHRoaXMpO1xuICAgIHRoaXMuc3lzdGVtTWFuYWdlciA9IG5ldyBTeXN0ZW1NYW5hZ2VyKHRoaXMpO1xuXG4gICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcblxuICAgIHRoaXMuZXZlbnRRdWV1ZXMgPSB7fTtcblxuICAgIGlmIChoYXNXaW5kb3cgJiYgdHlwZW9mIEN1c3RvbUV2ZW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB2YXIgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoXCJlY3N5LXdvcmxkLWNyZWF0ZWRcIiwge1xuICAgICAgICBkZXRhaWw6IHsgd29ybGQ6IHRoaXMsIHZlcnNpb246IFZlcnNpb24gfSxcbiAgICAgIH0pO1xuICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH1cblxuICAgIHRoaXMubGFzdFRpbWUgPSBub3coKSAvIDEwMDA7XG4gIH1cblxuICByZWdpc3RlckNvbXBvbmVudChDb21wb25lbnQsIG9iamVjdFBvb2wpIHtcbiAgICB0aGlzLmNvbXBvbmVudHNNYW5hZ2VyLnJlZ2lzdGVyQ29tcG9uZW50KENvbXBvbmVudCwgb2JqZWN0UG9vbCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICByZWdpc3RlclN5c3RlbShTeXN0ZW0sIGF0dHJpYnV0ZXMpIHtcbiAgICB0aGlzLnN5c3RlbU1hbmFnZXIucmVnaXN0ZXJTeXN0ZW0oU3lzdGVtLCBhdHRyaWJ1dGVzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGhhc1JlZ2lzdGVyZWRDb21wb25lbnQoQ29tcG9uZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50c01hbmFnZXIuaGFzQ29tcG9uZW50KENvbXBvbmVudCk7XG4gIH1cblxuICB1bnJlZ2lzdGVyU3lzdGVtKFN5c3RlbSkge1xuICAgIHRoaXMuc3lzdGVtTWFuYWdlci51bnJlZ2lzdGVyU3lzdGVtKFN5c3RlbSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBnZXRTeXN0ZW0oU3lzdGVtQ2xhc3MpIHtcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW1NYW5hZ2VyLmdldFN5c3RlbShTeXN0ZW1DbGFzcyk7XG4gIH1cblxuICBnZXRTeXN0ZW1zKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbU1hbmFnZXIuZ2V0U3lzdGVtcygpO1xuICB9XG5cbiAgZXhlY3V0ZShkZWx0YSwgdGltZSkge1xuICAgIGlmICghZGVsdGEpIHtcbiAgICAgIHRpbWUgPSBub3coKSAvIDEwMDA7XG4gICAgICBkZWx0YSA9IHRpbWUgLSB0aGlzLmxhc3RUaW1lO1xuICAgICAgdGhpcy5sYXN0VGltZSA9IHRpbWU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZW5hYmxlZCkge1xuICAgICAgdGhpcy5zeXN0ZW1NYW5hZ2VyLmV4ZWN1dGUoZGVsdGEsIHRpbWUpO1xuICAgICAgdGhpcy5lbnRpdHlNYW5hZ2VyLnByb2Nlc3NEZWZlcnJlZFJlbW92YWwoKTtcbiAgICB9XG4gIH1cblxuICBzdG9wKCkge1xuICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgcGxheSgpIHtcbiAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgY3JlYXRlRW50aXR5KG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5lbnRpdHlNYW5hZ2VyLmNyZWF0ZUVudGl0eShuYW1lKTtcbiAgfVxuXG4gIHN0YXRzKCkge1xuICAgIHZhciBzdGF0cyA9IHtcbiAgICAgIGVudGl0aWVzOiB0aGlzLmVudGl0eU1hbmFnZXIuc3RhdHMoKSxcbiAgICAgIHN5c3RlbTogdGhpcy5zeXN0ZW1NYW5hZ2VyLnN0YXRzKCksXG4gICAgfTtcblxuICAgIHJldHVybiBzdGF0cztcbiAgfVxufVxuIiwiaW1wb3J0IFF1ZXJ5IGZyb20gXCIuL1F1ZXJ5LmpzXCI7XG5pbXBvcnQgeyBjb21wb25lbnRSZWdpc3RlcmVkIH0gZnJvbSBcIi4vVXRpbHMuanNcIjtcblxuZXhwb3J0IGNsYXNzIFN5c3RlbSB7XG4gIGNhbkV4ZWN1dGUoKSB7XG4gICAgaWYgKHRoaXMuX21hbmRhdG9yeVF1ZXJpZXMubGVuZ3RoID09PSAwKSByZXR1cm4gdHJ1ZTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbWFuZGF0b3J5UXVlcmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5fbWFuZGF0b3J5UXVlcmllc1tpXTtcbiAgICAgIGlmIChxdWVyeS5lbnRpdGllcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZ2V0TmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5nZXROYW1lKCk7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcih3b3JsZCwgYXR0cmlidXRlcykge1xuICAgIHRoaXMud29ybGQgPSB3b3JsZDtcbiAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuXG4gICAgLy8gQHRvZG8gQmV0dGVyIG5hbWluZyA6KVxuICAgIHRoaXMuX3F1ZXJpZXMgPSB7fTtcbiAgICB0aGlzLnF1ZXJpZXMgPSB7fTtcblxuICAgIHRoaXMucHJpb3JpdHkgPSAwO1xuXG4gICAgLy8gVXNlZCBmb3Igc3RhdHNcbiAgICB0aGlzLmV4ZWN1dGVUaW1lID0gMDtcblxuICAgIGlmIChhdHRyaWJ1dGVzICYmIGF0dHJpYnV0ZXMucHJpb3JpdHkpIHtcbiAgICAgIHRoaXMucHJpb3JpdHkgPSBhdHRyaWJ1dGVzLnByaW9yaXR5O1xuICAgIH1cblxuICAgIHRoaXMuX21hbmRhdG9yeVF1ZXJpZXMgPSBbXTtcblxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuXG4gICAgaWYgKHRoaXMuY29uc3RydWN0b3IucXVlcmllcykge1xuICAgICAgZm9yICh2YXIgcXVlcnlOYW1lIGluIHRoaXMuY29uc3RydWN0b3IucXVlcmllcykge1xuICAgICAgICB2YXIgcXVlcnlDb25maWcgPSB0aGlzLmNvbnN0cnVjdG9yLnF1ZXJpZXNbcXVlcnlOYW1lXTtcbiAgICAgICAgdmFyIENvbXBvbmVudHMgPSBxdWVyeUNvbmZpZy5jb21wb25lbnRzO1xuICAgICAgICBpZiAoIUNvbXBvbmVudHMgfHwgQ29tcG9uZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCInY29tcG9uZW50cycgYXR0cmlidXRlIGNhbid0IGJlIGVtcHR5IGluIGEgcXVlcnlcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZXRlY3QgaWYgdGhlIGNvbXBvbmVudHMgaGF2ZSBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZFxuICAgICAgICBsZXQgdW5yZWdpc3RlcmVkQ29tcG9uZW50cyA9IENvbXBvbmVudHMuZmlsdGVyKFxuICAgICAgICAgIChDb21wb25lbnQpID0+ICFjb21wb25lbnRSZWdpc3RlcmVkKENvbXBvbmVudClcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAodW5yZWdpc3RlcmVkQ29tcG9uZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYFRyaWVkIHRvIGNyZWF0ZSBhIHF1ZXJ5ICcke1xuICAgICAgICAgICAgICB0aGlzLmNvbnN0cnVjdG9yLm5hbWVcbiAgICAgICAgICAgIH0uJHtxdWVyeU5hbWV9JyB3aXRoIHVucmVnaXN0ZXJlZCBjb21wb25lbnRzOiBbJHt1bnJlZ2lzdGVyZWRDb21wb25lbnRzXG4gICAgICAgICAgICAgIC5tYXAoKGMpID0+IGMuZ2V0TmFtZSgpKVxuICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfV1gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBxdWVyeSA9IHRoaXMud29ybGQuZW50aXR5TWFuYWdlci5xdWVyeUNvbXBvbmVudHMoQ29tcG9uZW50cyk7XG5cbiAgICAgICAgdGhpcy5fcXVlcmllc1txdWVyeU5hbWVdID0gcXVlcnk7XG4gICAgICAgIGlmIChxdWVyeUNvbmZpZy5tYW5kYXRvcnkgPT09IHRydWUpIHtcbiAgICAgICAgICB0aGlzLl9tYW5kYXRvcnlRdWVyaWVzLnB1c2gocXVlcnkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucXVlcmllc1txdWVyeU5hbWVdID0ge1xuICAgICAgICAgIHJlc3VsdHM6IHF1ZXJ5LmVudGl0aWVzLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFJlYWN0aXZlIGNvbmZpZ3VyYXRpb24gYWRkZWQvcmVtb3ZlZC9jaGFuZ2VkXG4gICAgICAgIHZhciB2YWxpZEV2ZW50cyA9IFtcImFkZGVkXCIsIFwicmVtb3ZlZFwiLCBcImNoYW5nZWRcIl07XG5cbiAgICAgICAgY29uc3QgZXZlbnRNYXBwaW5nID0ge1xuICAgICAgICAgIGFkZGVkOiBRdWVyeS5wcm90b3R5cGUuRU5USVRZX0FEREVELFxuICAgICAgICAgIHJlbW92ZWQ6IFF1ZXJ5LnByb3RvdHlwZS5FTlRJVFlfUkVNT1ZFRCxcbiAgICAgICAgICBjaGFuZ2VkOiBRdWVyeS5wcm90b3R5cGUuQ09NUE9ORU5UX0NIQU5HRUQsIC8vIFF1ZXJ5LnByb3RvdHlwZS5FTlRJVFlfQ0hBTkdFRFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChxdWVyeUNvbmZpZy5saXN0ZW4pIHtcbiAgICAgICAgICB2YWxpZEV2ZW50cy5mb3JFYWNoKChldmVudE5hbWUpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5leGVjdXRlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICBgU3lzdGVtICcke3RoaXMuZ2V0TmFtZSgpfScgaGFzIGRlZmluZWQgbGlzdGVuIGV2ZW50cyAoJHt2YWxpZEV2ZW50cy5qb2luKFxuICAgICAgICAgICAgICAgICAgXCIsIFwiXG4gICAgICAgICAgICAgICAgKX0pIGZvciBxdWVyeSAnJHtxdWVyeU5hbWV9JyBidXQgaXQgZG9lcyBub3QgaW1wbGVtZW50IHRoZSAnZXhlY3V0ZScgbWV0aG9kLmBcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSXMgdGhlIGV2ZW50IGVuYWJsZWQgb24gdGhpcyBzeXN0ZW0ncyBxdWVyeT9cbiAgICAgICAgICAgIGlmIChxdWVyeUNvbmZpZy5saXN0ZW5bZXZlbnROYW1lXSkge1xuICAgICAgICAgICAgICBsZXQgZXZlbnQgPSBxdWVyeUNvbmZpZy5saXN0ZW5bZXZlbnROYW1lXTtcblxuICAgICAgICAgICAgICBpZiAoZXZlbnROYW1lID09PSBcImNoYW5nZWRcIikge1xuICAgICAgICAgICAgICAgIHF1ZXJ5LnJlYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEFueSBjaGFuZ2Ugb24gdGhlIGVudGl0eSBmcm9tIHRoZSBjb21wb25lbnRzIGluIHRoZSBxdWVyeVxuICAgICAgICAgICAgICAgICAgbGV0IGV2ZW50TGlzdCA9ICh0aGlzLnF1ZXJpZXNbcXVlcnlOYW1lXVtldmVudE5hbWVdID0gW10pO1xuICAgICAgICAgICAgICAgICAgcXVlcnkuZXZlbnREaXNwYXRjaGVyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgICAgIFF1ZXJ5LnByb3RvdHlwZS5DT01QT05FTlRfQ0hBTkdFRCxcbiAgICAgICAgICAgICAgICAgICAgKGVudGl0eSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIEF2b2lkIGR1cGxpY2F0ZXNcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnRMaXN0LmluZGV4T2YoZW50aXR5KSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50TGlzdC5wdXNoKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShldmVudCkpIHtcbiAgICAgICAgICAgICAgICAgIGxldCBldmVudExpc3QgPSAodGhpcy5xdWVyaWVzW3F1ZXJ5TmFtZV1bZXZlbnROYW1lXSA9IFtdKTtcbiAgICAgICAgICAgICAgICAgIHF1ZXJ5LmV2ZW50RGlzcGF0Y2hlci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICAgICBRdWVyeS5wcm90b3R5cGUuQ09NUE9ORU5UX0NIQU5HRUQsXG4gICAgICAgICAgICAgICAgICAgIChlbnRpdHksIGNoYW5nZWRDb21wb25lbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBBdm9pZCBkdXBsaWNhdGVzXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuaW5kZXhPZihjaGFuZ2VkQ29tcG9uZW50LmNvbnN0cnVjdG9yKSAhPT0gLTEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50TGlzdC5pbmRleE9mKGVudGl0eSkgPT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudExpc3QucHVzaChlbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgIC8vIENoZWNraW5nIGp1c3Qgc3BlY2lmaWMgY29tcG9uZW50c1xuICAgICAgICAgICAgICAgICAgbGV0IGNoYW5nZWRMaXN0ID0gKHRoaXMucXVlcmllc1txdWVyeU5hbWVdW2V2ZW50TmFtZV0gPSB7fSk7XG4gICAgICAgICAgICAgICAgICBldmVudC5mb3JFYWNoKGNvbXBvbmVudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBldmVudExpc3QgPSAoY2hhbmdlZExpc3RbXG4gICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50UHJvcGVydHlOYW1lKGNvbXBvbmVudClcbiAgICAgICAgICAgICAgICAgICAgXSA9IFtdKTtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkuZXZlbnREaXNwYXRjaGVyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgICAgICAgUXVlcnkucHJvdG90eXBlLkNPTVBPTkVOVF9DSEFOR0VELFxuICAgICAgICAgICAgICAgICAgICAgIChlbnRpdHksIGNoYW5nZWRDb21wb25lbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlZENvbXBvbmVudC5jb25zdHJ1Y3RvciA9PT0gY29tcG9uZW50ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50TGlzdC5pbmRleE9mKGVudGl0eSkgPT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRMaXN0LnB1c2goZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBldmVudExpc3QgPSAodGhpcy5xdWVyaWVzW3F1ZXJ5TmFtZV1bZXZlbnROYW1lXSA9IFtdKTtcblxuICAgICAgICAgICAgICAgIHF1ZXJ5LmV2ZW50RGlzcGF0Y2hlci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICAgZXZlbnRNYXBwaW5nW2V2ZW50TmFtZV0sXG4gICAgICAgICAgICAgICAgICAoZW50aXR5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEBmaXhtZSBvdmVyaGVhZD9cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50TGlzdC5pbmRleE9mKGVudGl0eSkgPT09IC0xKVxuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50TGlzdC5wdXNoKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICB0aGlzLmV4ZWN1dGVUaW1lID0gMDtcbiAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHBsYXkoKSB7XG4gICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIEBxdWVzdGlvbiByZW5hbWUgdG8gY2xlYXIgcXVldWVzP1xuICBjbGVhckV2ZW50cygpIHtcbiAgICBmb3IgKGxldCBxdWVyeU5hbWUgaW4gdGhpcy5xdWVyaWVzKSB7XG4gICAgICB2YXIgcXVlcnkgPSB0aGlzLnF1ZXJpZXNbcXVlcnlOYW1lXTtcbiAgICAgIGlmIChxdWVyeS5hZGRlZCkge1xuICAgICAgICBxdWVyeS5hZGRlZC5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgICAgaWYgKHF1ZXJ5LnJlbW92ZWQpIHtcbiAgICAgICAgcXVlcnkucmVtb3ZlZC5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgICAgaWYgKHF1ZXJ5LmNoYW5nZWQpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocXVlcnkuY2hhbmdlZCkpIHtcbiAgICAgICAgICBxdWVyeS5jaGFuZ2VkLmxlbmd0aCA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yIChsZXQgbmFtZSBpbiBxdWVyeS5jaGFuZ2VkKSB7XG4gICAgICAgICAgICBxdWVyeS5jaGFuZ2VkW25hbWVdLmxlbmd0aCA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdG9KU09OKCkge1xuICAgIHZhciBqc29uID0ge1xuICAgICAgbmFtZTogdGhpcy5nZXROYW1lKCksXG4gICAgICBlbmFibGVkOiB0aGlzLmVuYWJsZWQsXG4gICAgICBleGVjdXRlVGltZTogdGhpcy5leGVjdXRlVGltZSxcbiAgICAgIHByaW9yaXR5OiB0aGlzLnByaW9yaXR5LFxuICAgICAgcXVlcmllczoge30sXG4gICAgfTtcblxuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yLnF1ZXJpZXMpIHtcbiAgICAgIHZhciBxdWVyaWVzID0gdGhpcy5jb25zdHJ1Y3Rvci5xdWVyaWVzO1xuICAgICAgZm9yIChsZXQgcXVlcnlOYW1lIGluIHF1ZXJpZXMpIHtcbiAgICAgICAgbGV0IHF1ZXJ5ID0gdGhpcy5xdWVyaWVzW3F1ZXJ5TmFtZV07XG4gICAgICAgIGxldCBxdWVyeURlZmluaXRpb24gPSBxdWVyaWVzW3F1ZXJ5TmFtZV07XG4gICAgICAgIGxldCBqc29uUXVlcnkgPSAoanNvbi5xdWVyaWVzW3F1ZXJ5TmFtZV0gPSB7XG4gICAgICAgICAga2V5OiB0aGlzLl9xdWVyaWVzW3F1ZXJ5TmFtZV0ua2V5LFxuICAgICAgICB9KTtcblxuICAgICAgICBqc29uUXVlcnkubWFuZGF0b3J5ID0gcXVlcnlEZWZpbml0aW9uLm1hbmRhdG9yeSA9PT0gdHJ1ZTtcbiAgICAgICAganNvblF1ZXJ5LnJlYWN0aXZlID1cbiAgICAgICAgICBxdWVyeURlZmluaXRpb24ubGlzdGVuICYmXG4gICAgICAgICAgKHF1ZXJ5RGVmaW5pdGlvbi5saXN0ZW4uYWRkZWQgPT09IHRydWUgfHxcbiAgICAgICAgICAgIHF1ZXJ5RGVmaW5pdGlvbi5saXN0ZW4ucmVtb3ZlZCA9PT0gdHJ1ZSB8fFxuICAgICAgICAgICAgcXVlcnlEZWZpbml0aW9uLmxpc3Rlbi5jaGFuZ2VkID09PSB0cnVlIHx8XG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KHF1ZXJ5RGVmaW5pdGlvbi5saXN0ZW4uY2hhbmdlZCkpO1xuXG4gICAgICAgIGlmIChqc29uUXVlcnkucmVhY3RpdmUpIHtcbiAgICAgICAgICBqc29uUXVlcnkubGlzdGVuID0ge307XG5cbiAgICAgICAgICBjb25zdCBtZXRob2RzID0gW1wiYWRkZWRcIiwgXCJyZW1vdmVkXCIsIFwiY2hhbmdlZFwiXTtcbiAgICAgICAgICBtZXRob2RzLmZvckVhY2goKG1ldGhvZCkgPT4ge1xuICAgICAgICAgICAgaWYgKHF1ZXJ5W21ldGhvZF0pIHtcbiAgICAgICAgICAgICAganNvblF1ZXJ5Lmxpc3RlblttZXRob2RdID0ge1xuICAgICAgICAgICAgICAgIGVudGl0aWVzOiBxdWVyeVttZXRob2RdLmxlbmd0aCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBqc29uO1xuICB9XG59XG5cblN5c3RlbS5pc1N5c3RlbSA9IHRydWU7XG5TeXN0ZW0uZ2V0TmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuZGlzcGxheU5hbWUgfHwgdGhpcy5uYW1lO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIE5vdChDb21wb25lbnQpIHtcbiAgcmV0dXJuIHtcbiAgICBvcGVyYXRvcjogXCJub3RcIixcbiAgICBDb21wb25lbnQ6IENvbXBvbmVudCxcbiAgfTtcbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCIuL0NvbXBvbmVudC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgVGFnQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoZmFsc2UpO1xuICB9XG59XG5cblRhZ0NvbXBvbmVudC5pc1RhZ0NvbXBvbmVudCA9IHRydWU7XG4iLCJleHBvcnQgY29uc3QgY29weVZhbHVlID0gKHNyYykgPT4gc3JjO1xuXG5leHBvcnQgY29uc3QgY2xvbmVWYWx1ZSA9IChzcmMpID0+IHNyYztcblxuZXhwb3J0IGNvbnN0IGNvcHlBcnJheSA9IChzcmMsIGRlc3QpID0+IHtcbiAgaWYgKCFzcmMpIHtcbiAgICByZXR1cm4gc3JjO1xuICB9XG5cbiAgaWYgKCFkZXN0KSB7XG4gICAgcmV0dXJuIHNyYy5zbGljZSgpO1xuICB9XG5cbiAgZGVzdC5sZW5ndGggPSAwO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3JjLmxlbmd0aDsgaSsrKSB7XG4gICAgZGVzdC5wdXNoKHNyY1tpXSk7XG4gIH1cblxuICByZXR1cm4gZGVzdDtcbn07XG5cbmV4cG9ydCBjb25zdCBjbG9uZUFycmF5ID0gKHNyYykgPT4gc3JjICYmIHNyYy5zbGljZSgpO1xuXG5leHBvcnQgY29uc3QgY29weUpTT04gPSAoc3JjKSA9PiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHNyYykpO1xuXG5leHBvcnQgY29uc3QgY2xvbmVKU09OID0gKHNyYykgPT4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzcmMpKTtcblxuZXhwb3J0IGNvbnN0IGNvcHlDb3B5YWJsZSA9IChzcmMsIGRlc3QpID0+IHtcbiAgaWYgKCFzcmMpIHtcbiAgICByZXR1cm4gc3JjO1xuICB9XG5cbiAgaWYgKCFkZXN0KSB7XG4gICAgcmV0dXJuIHNyYy5jbG9uZSgpO1xuICB9XG5cbiAgcmV0dXJuIGRlc3QuY29weShzcmMpO1xufTtcblxuZXhwb3J0IGNvbnN0IGNsb25lQ2xvbmFibGUgPSAoc3JjKSA9PiBzcmMgJiYgc3JjLmNsb25lKCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUeXBlKHR5cGVEZWZpbml0aW9uKSB7XG4gIHZhciBtYW5kYXRvcnlQcm9wZXJ0aWVzID0gW1wibmFtZVwiLCBcImRlZmF1bHRcIiwgXCJjb3B5XCIsIFwiY2xvbmVcIl07XG5cbiAgdmFyIHVuZGVmaW5lZFByb3BlcnRpZXMgPSBtYW5kYXRvcnlQcm9wZXJ0aWVzLmZpbHRlcigocCkgPT4ge1xuICAgIHJldHVybiAhdHlwZURlZmluaXRpb24uaGFzT3duUHJvcGVydHkocCk7XG4gIH0pO1xuXG4gIGlmICh1bmRlZmluZWRQcm9wZXJ0aWVzLmxlbmd0aCA+IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgY3JlYXRlVHlwZSBleHBlY3RzIGEgdHlwZSBkZWZpbml0aW9uIHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOiAke3VuZGVmaW5lZFByb3BlcnRpZXMuam9pbihcbiAgICAgICAgXCIsIFwiXG4gICAgICApfWBcbiAgICApO1xuICB9XG5cbiAgdHlwZURlZmluaXRpb24uaXNUeXBlID0gdHJ1ZTtcblxuICByZXR1cm4gdHlwZURlZmluaXRpb247XG59XG5cbi8qKlxuICogU3RhbmRhcmQgdHlwZXNcbiAqL1xuZXhwb3J0IGNvbnN0IFR5cGVzID0ge1xuICBOdW1iZXI6IGNyZWF0ZVR5cGUoe1xuICAgIG5hbWU6IFwiTnVtYmVyXCIsXG4gICAgZGVmYXVsdDogMCxcbiAgICBjb3B5OiBjb3B5VmFsdWUsXG4gICAgY2xvbmU6IGNsb25lVmFsdWUsXG4gIH0pLFxuXG4gIEJvb2xlYW46IGNyZWF0ZVR5cGUoe1xuICAgIG5hbWU6IFwiQm9vbGVhblwiLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIGNvcHk6IGNvcHlWYWx1ZSxcbiAgICBjbG9uZTogY2xvbmVWYWx1ZSxcbiAgfSksXG5cbiAgU3RyaW5nOiBjcmVhdGVUeXBlKHtcbiAgICBuYW1lOiBcIlN0cmluZ1wiLFxuICAgIGRlZmF1bHQ6IFwiXCIsXG4gICAgY29weTogY29weVZhbHVlLFxuICAgIGNsb25lOiBjbG9uZVZhbHVlLFxuICB9KSxcblxuICBBcnJheTogY3JlYXRlVHlwZSh7XG4gICAgbmFtZTogXCJBcnJheVwiLFxuICAgIGRlZmF1bHQ6IFtdLFxuICAgIGNvcHk6IGNvcHlBcnJheSxcbiAgICBjbG9uZTogY2xvbmVBcnJheSxcbiAgfSksXG5cbiAgUmVmOiBjcmVhdGVUeXBlKHtcbiAgICBuYW1lOiBcIlJlZlwiLFxuICAgIGRlZmF1bHQ6IHVuZGVmaW5lZCxcbiAgICBjb3B5OiBjb3B5VmFsdWUsXG4gICAgY2xvbmU6IGNsb25lVmFsdWUsXG4gIH0pLFxuXG4gIEpTT046IGNyZWF0ZVR5cGUoe1xuICAgIG5hbWU6IFwiSlNPTlwiLFxuICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgY29weTogY29weUpTT04sXG4gICAgY2xvbmU6IGNsb25lSlNPTixcbiAgfSksXG59O1xuIiwiZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlSWQobGVuZ3RoKSB7XG4gIHZhciByZXN1bHQgPSBcIlwiO1xuICB2YXIgY2hhcmFjdGVycyA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVowMTIzNDU2Nzg5XCI7XG4gIHZhciBjaGFyYWN0ZXJzTGVuZ3RoID0gY2hhcmFjdGVycy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICByZXN1bHQgKz0gY2hhcmFjdGVycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVyc0xlbmd0aCkpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbmplY3RTY3JpcHQoc3JjLCBvbkxvYWQpIHtcbiAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gIC8vIEB0b2RvIFVzZSBsaW5rIHRvIHRoZSBlY3N5LWRldnRvb2xzIHJlcG8/XG4gIHNjcmlwdC5zcmMgPSBzcmM7XG4gIHNjcmlwdC5vbmxvYWQgPSBvbkxvYWQ7XG4gIChkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbn1cbiIsIi8qIGdsb2JhbCBQZWVyICovXG5pbXBvcnQgeyBpbmplY3RTY3JpcHQsIGdlbmVyYXRlSWQgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuaW1wb3J0IHsgaGFzV2luZG93IH0gZnJvbSBcIi4uL1V0aWxzLmpzXCI7XG5cbmZ1bmN0aW9uIGhvb2tDb25zb2xlQW5kRXJyb3JzKGNvbm5lY3Rpb24pIHtcbiAgdmFyIHdyYXBGdW5jdGlvbnMgPSBbXCJlcnJvclwiLCBcIndhcm5pbmdcIiwgXCJsb2dcIl07XG4gIHdyYXBGdW5jdGlvbnMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgaWYgKHR5cGVvZiBjb25zb2xlW2tleV0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdmFyIGZuID0gY29uc29sZVtrZXldLmJpbmQoY29uc29sZSk7XG4gICAgICBjb25zb2xlW2tleV0gPSAoLi4uYXJncykgPT4ge1xuICAgICAgICBjb25uZWN0aW9uLnNlbmQoe1xuICAgICAgICAgIG1ldGhvZDogXCJjb25zb2xlXCIsXG4gICAgICAgICAgdHlwZToga2V5LFxuICAgICAgICAgIGFyZ3M6IEpTT04uc3RyaW5naWZ5KGFyZ3MpLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgfTtcbiAgICB9XG4gIH0pO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgKGVycm9yKSA9PiB7XG4gICAgY29ubmVjdGlvbi5zZW5kKHtcbiAgICAgIG1ldGhvZDogXCJlcnJvclwiLFxuICAgICAgZXJyb3I6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbWVzc2FnZTogZXJyb3IuZXJyb3IubWVzc2FnZSxcbiAgICAgICAgc3RhY2s6IGVycm9yLmVycm9yLnN0YWNrLFxuICAgICAgfSksXG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbmNsdWRlUmVtb3RlSWRIVE1MKHJlbW90ZUlkKSB7XG4gIGxldCBpbmZvRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgaW5mb0Rpdi5zdHlsZS5jc3NUZXh0ID0gYFxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzMzMztcbiAgICBjb2xvcjogI2FhYTtcbiAgICBkaXNwbGF5OmZsZXg7XG4gICAgZm9udC1mYW1pbHk6IEFyaWFsO1xuICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gICAgaGVpZ2h0OiA0MHB4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGxlZnQ6IDA7XG4gICAgb3BhY2l0eTogMC45O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICByaWdodDogMDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgdG9wOiAwO1xuICBgO1xuXG4gIGluZm9EaXYuaW5uZXJIVE1MID0gYE9wZW4gRUNTWSBkZXZ0b29scyB0byBjb25uZWN0IHRvIHRoaXMgcGFnZSB1c2luZyB0aGUgY29kZTombmJzcDs8YiBzdHlsZT1cImNvbG9yOiAjZmZmXCI+JHtyZW1vdGVJZH08L2I+Jm5ic3A7PGJ1dHRvbiBvbkNsaWNrPVwiZ2VuZXJhdGVOZXdDb2RlKClcIj5HZW5lcmF0ZSBuZXcgY29kZTwvYnV0dG9uPmA7XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaW5mb0Rpdik7XG5cbiAgcmV0dXJuIGluZm9EaXY7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVSZW1vdGVEZXZ0b29scyhyZW1vdGVJZCkge1xuICBpZiAoIWhhc1dpbmRvdykge1xuICAgIGNvbnNvbGUud2FybihcIlJlbW90ZSBkZXZ0b29scyBub3QgYXZhaWxhYmxlIG91dHNpZGUgdGhlIGJyb3dzZXJcIik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgd2luZG93LmdlbmVyYXRlTmV3Q29kZSA9ICgpID0+IHtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgcmVtb3RlSWQgPSBnZW5lcmF0ZUlkKDYpO1xuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImVjc3lSZW1vdGVJZFwiLCByZW1vdGVJZCk7XG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZChmYWxzZSk7XG4gIH07XG5cbiAgcmVtb3RlSWQgPSByZW1vdGVJZCB8fCB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJlY3N5UmVtb3RlSWRcIik7XG4gIGlmICghcmVtb3RlSWQpIHtcbiAgICByZW1vdGVJZCA9IGdlbmVyYXRlSWQoNik7XG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiZWNzeVJlbW90ZUlkXCIsIHJlbW90ZUlkKTtcbiAgfVxuXG4gIGxldCBpbmZvRGl2ID0gaW5jbHVkZVJlbW90ZUlkSFRNTChyZW1vdGVJZCk7XG5cbiAgd2luZG93Ll9fRUNTWV9SRU1PVEVfREVWVE9PTFNfSU5KRUNURUQgPSB0cnVlO1xuICB3aW5kb3cuX19FQ1NZX1JFTU9URV9ERVZUT09MUyA9IHt9O1xuXG4gIGxldCBWZXJzaW9uID0gXCJcIjtcblxuICAvLyBUaGlzIGlzIHVzZWQgdG8gY29sbGVjdCB0aGUgd29ybGRzIGNyZWF0ZWQgYmVmb3JlIHRoZSBjb21tdW5pY2F0aW9uIGlzIGJlaW5nIGVzdGFibGlzaGVkXG4gIGxldCB3b3JsZHNCZWZvcmVMb2FkaW5nID0gW107XG4gIGxldCBvbldvcmxkQ3JlYXRlZCA9IChlKSA9PiB7XG4gICAgdmFyIHdvcmxkID0gZS5kZXRhaWwud29ybGQ7XG4gICAgVmVyc2lvbiA9IGUuZGV0YWlsLnZlcnNpb247XG4gICAgd29ybGRzQmVmb3JlTG9hZGluZy5wdXNoKHdvcmxkKTtcbiAgfTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJlY3N5LXdvcmxkLWNyZWF0ZWRcIiwgb25Xb3JsZENyZWF0ZWQpO1xuXG4gIGxldCBvbkxvYWRlZCA9ICgpID0+IHtcbiAgICAvLyB2YXIgcGVlciA9IG5ldyBQZWVyKHJlbW90ZUlkKTtcbiAgICB2YXIgcGVlciA9IG5ldyBQZWVyKHJlbW90ZUlkLCB7XG4gICAgICBob3N0OiBcInBlZXJqcy5lY3N5LmlvXCIsXG4gICAgICBzZWN1cmU6IHRydWUsXG4gICAgICBwb3J0OiA0NDMsXG4gICAgICBjb25maWc6IHtcbiAgICAgICAgaWNlU2VydmVyczogW1xuICAgICAgICAgIHsgdXJsOiBcInN0dW46c3R1bi5sLmdvb2dsZS5jb206MTkzMDJcIiB9LFxuICAgICAgICAgIHsgdXJsOiBcInN0dW46c3R1bjEubC5nb29nbGUuY29tOjE5MzAyXCIgfSxcbiAgICAgICAgICB7IHVybDogXCJzdHVuOnN0dW4yLmwuZ29vZ2xlLmNvbToxOTMwMlwiIH0sXG4gICAgICAgICAgeyB1cmw6IFwic3R1bjpzdHVuMy5sLmdvb2dsZS5jb206MTkzMDJcIiB9LFxuICAgICAgICAgIHsgdXJsOiBcInN0dW46c3R1bjQubC5nb29nbGUuY29tOjE5MzAyXCIgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICBkZWJ1ZzogMyxcbiAgICB9KTtcblxuICAgIHBlZXIub24oXCJvcGVuXCIsICgvKiBpZCAqLykgPT4ge1xuICAgICAgcGVlci5vbihcImNvbm5lY3Rpb25cIiwgKGNvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgd2luZG93Ll9fRUNTWV9SRU1PVEVfREVWVE9PTFMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XG4gICAgICAgIGNvbm5lY3Rpb24ub24oXCJvcGVuXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAvLyBpbmZvRGl2LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgICAgIGluZm9EaXYuaW5uZXJIVE1MID0gXCJDb25uZWN0ZWRcIjtcblxuICAgICAgICAgIC8vIFJlY2VpdmUgbWVzc2FnZXNcbiAgICAgICAgICBjb25uZWN0aW9uLm9uKFwiZGF0YVwiLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gXCJpbml0XCIpIHtcbiAgICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dC9qYXZhc2NyaXB0XCIpO1xuICAgICAgICAgICAgICBzY3JpcHQub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG5cbiAgICAgICAgICAgICAgICAvLyBPbmNlIHRoZSBzY3JpcHQgaXMgaW5qZWN0ZWQgd2UgZG9uJ3QgbmVlZCB0byBsaXN0ZW5cbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAgIFwiZWNzeS13b3JsZC1jcmVhdGVkXCIsXG4gICAgICAgICAgICAgICAgICBvbldvcmxkQ3JlYXRlZFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgd29ybGRzQmVmb3JlTG9hZGluZy5mb3JFYWNoKCh3b3JsZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwiZWNzeS13b3JsZC1jcmVhdGVkXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiB7IHdvcmxkOiB3b3JsZCwgdmVyc2lvbjogVmVyc2lvbiB9LFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHNjcmlwdC5pbm5lckhUTUwgPSBkYXRhLnNjcmlwdDtcbiAgICAgICAgICAgICAgKGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICBzY3JpcHQub25sb2FkKCk7XG5cbiAgICAgICAgICAgICAgaG9va0NvbnNvbGVBbmRFcnJvcnMoY29ubmVjdGlvbik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gXCJleGVjdXRlU2NyaXB0XCIpIHtcbiAgICAgICAgICAgICAgbGV0IHZhbHVlID0gZXZhbChkYXRhLnNjcmlwdCk7XG4gICAgICAgICAgICAgIGlmIChkYXRhLnJldHVybkV2YWwpIHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcImV2YWxSZXR1cm5cIixcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIEluamVjdCBQZWVySlMgc2NyaXB0XG4gIGluamVjdFNjcmlwdChcbiAgICBcImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vcGVlcmpzQDAuMy4yMC9kaXN0L3BlZXIubWluLmpzXCIsXG4gICAgb25Mb2FkZWRcbiAgKTtcbn1cblxuaWYgKGhhc1dpbmRvdykge1xuICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuXG4gIC8vIEB0b2RvIFByb3ZpZGUgYSB3YXkgdG8gZGlzYWJsZSBpdCBpZiBuZWVkZWRcbiAgaWYgKHVybFBhcmFtcy5oYXMoXCJlbmFibGUtcmVtb3RlLWRldnRvb2xzXCIpKSB7XG4gICAgZW5hYmxlUmVtb3RlRGV2dG9vbHMoKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInF1ZXJ5S2V5IiwiQ29tcG9uZW50cyIsImlkcyIsIm4iLCJsZW5ndGgiLCJUIiwiY29tcG9uZW50UmVnaXN0ZXJlZCIsIkVycm9yIiwib3BlcmF0b3IiLCJwdXNoIiwiQ29tcG9uZW50IiwiX3R5cGVJZCIsInNvcnQiLCJqb2luIiwiaGFzV2luZG93Iiwid2luZG93Iiwibm93IiwicGVyZm9ybWFuY2UiLCJiaW5kIiwiRGF0ZSIsInVuZGVmaW5lZCIsImlzQ29tcG9uZW50IiwiU3lzdGVtTWFuYWdlciIsIltvYmplY3QgT2JqZWN0XSIsIndvcmxkIiwidGhpcyIsIl9zeXN0ZW1zIiwiX2V4ZWN1dGVTeXN0ZW1zIiwibGFzdEV4ZWN1dGVkU3lzdGVtIiwiU3lzdGVtQ2xhc3MiLCJhdHRyaWJ1dGVzIiwiaXNTeXN0ZW0iLCJuYW1lIiwiZ2V0U3lzdGVtIiwiY29uc29sZSIsIndhcm4iLCJnZXROYW1lIiwic3lzdGVtIiwiaW5pdCIsIm9yZGVyIiwiZXhlY3V0ZSIsInNvcnRTeXN0ZW1zIiwic3BsaWNlIiwiaW5kZXhPZiIsImEiLCJiIiwicHJpb3JpdHkiLCJmaW5kIiwicyIsImluZGV4IiwiZGVsdGEiLCJ0aW1lIiwiaW5pdGlhbGl6ZWQiLCJjYW5FeGVjdXRlIiwic3RhcnRUaW1lIiwiZXhlY3V0ZVRpbWUiLCJjbGVhckV2ZW50cyIsImZvckVhY2giLCJzdG9wIiwiZm9yY2VQbGF5IiwiZW5hYmxlZCIsImV4ZWN1dGVTeXN0ZW0iLCJzdGF0cyIsIm51bVN5c3RlbXMiLCJzeXN0ZW1zIiwiaSIsInN5c3RlbVN0YXRzIiwicXVlcmllcyIsImN0eCIsIk9iamVjdFBvb2wiLCJpbml0aWFsU2l6ZSIsImZyZWVMaXN0IiwiY291bnQiLCJpc09iamVjdFBvb2wiLCJleHBhbmQiLCJNYXRoIiwicm91bmQiLCJwb3AiLCJpdGVtIiwicmVzZXQiLCJjbG9uZSIsIl9wb29sIiwiRXZlbnREaXNwYXRjaGVyIiwiX2xpc3RlbmVycyIsImZpcmVkIiwiaGFuZGxlZCIsImV2ZW50TmFtZSIsImxpc3RlbmVyIiwibGlzdGVuZXJzIiwibGlzdGVuZXJBcnJheSIsImVudGl0eSIsImNvbXBvbmVudCIsImFycmF5Iiwic2xpY2UiLCJjYWxsIiwiUXVlcnkiLCJtYW5hZ2VyIiwiTm90Q29tcG9uZW50cyIsImVudGl0aWVzIiwiZXZlbnREaXNwYXRjaGVyIiwicmVhY3RpdmUiLCJrZXkiLCJfZW50aXRpZXMiLCJtYXRjaCIsImRpc3BhdGNoRXZlbnQiLCJwcm90b3R5cGUiLCJFTlRJVFlfQURERUQiLCJFTlRJVFlfUkVNT1ZFRCIsImhhc0FsbENvbXBvbmVudHMiLCJoYXNBbnlDb21wb25lbnRzIiwiY29tcG9uZW50cyIsImluY2x1ZGVkIiwibWFwIiwiQyIsIm5vdCIsIm51bUVudGl0aWVzIiwibnVtQ29tcG9uZW50cyIsIkNPTVBPTkVOVF9DSEFOR0VEIiwiUXVlcnlNYW5hZ2VyIiwiX3dvcmxkIiwiX3F1ZXJpZXMiLCJxdWVyeU5hbWUiLCJxdWVyeSIsInJlbW92ZUVudGl0eSIsImFkZEVudGl0eSIsInByb3BzIiwic2NoZW1hIiwiY29uc3RydWN0b3IiLCJoYXNPd25Qcm9wZXJ0eSIsInNjaGVtYVByb3AiLCJ0eXBlIiwiZGVmYXVsdCIsInNvdXJjZSIsInByb3AiLCJjb3B5IiwicmVsZWFzZSIsInNyYyIsIk9iamVjdCIsImtleXMiLCJzcmNLZXkiLCJkaXNwbGF5TmFtZSIsIlN5c3RlbVN0YXRlQ29tcG9uZW50IiwiaXNTeXN0ZW1TdGF0ZUNvbXBvbmVudCIsIkVudGl0eVBvb2wiLCJlbnRpdHlNYW5hZ2VyIiwiZW50aXR5Q2xhc3MiLCJzdXBlciIsIkVudGl0eU1hbmFnZXIiLCJjb21wb25lbnRzTWFuYWdlciIsIl9uZXh0RW50aXR5SWQiLCJfZW50aXRpZXNCeU5hbWVzIiwiX3F1ZXJ5TWFuYWdlciIsIl9lbnRpdHlQb29sIiwib3B0aW9ucyIsImVudGl0eVBvb2xTaXplIiwiZW50aXRpZXNXaXRoQ29tcG9uZW50c1RvUmVtb3ZlIiwiZW50aXRpZXNUb1JlbW92ZSIsImRlZmVycmVkUmVtb3ZhbEVuYWJsZWQiLCJhY3F1aXJlIiwiYWxpdmUiLCJFTlRJVFlfQ1JFQVRFRCIsInZhbHVlcyIsIl9Db21wb25lbnRzTWFwIiwiX0NvbXBvbmVudFR5cGVzIiwiX19wcm90b19fIiwibnVtU3RhdGVDb21wb25lbnRzIiwiY29tcG9uZW50UG9vbCIsImdldENvbXBvbmVudHNQb29sIiwiX2NvbXBvbmVudHMiLCJvbkVudGl0eUNvbXBvbmVudEFkZGVkIiwiY29tcG9uZW50QWRkZWRUb0VudGl0eSIsIkNPTVBPTkVOVF9BRERFRCIsImltbWVkaWF0ZWx5IiwiQ09NUE9ORU5UX1JFTU9WRSIsIl9lbnRpdHlSZW1vdmVDb21wb25lbnRTeW5jIiwiX0NvbXBvbmVudFR5cGVzVG9SZW1vdmUiLCJfY29tcG9uZW50c1RvUmVtb3ZlIiwib25FbnRpdHlDb21wb25lbnRSZW1vdmVkIiwicmVtb3ZlIiwiZGlzcG9zZSIsImNvbXBvbmVudFJlbW92ZWRGcm9tRW50aXR5IiwiaiIsImVudGl0eVJlbW92ZUNvbXBvbmVudCIsImVudGl0eVJlbW92ZUFsbENvbXBvbmVudHMiLCJvbkVudGl0eVJlbW92ZWQiLCJfcmVsZWFzZUVudGl0eSIsImdldFF1ZXJ5IiwibnVtUXVlcmllcyIsIm51bUNvbXBvbmVudFBvb2wiLCJfY29tcG9uZW50UG9vbCIsImVjc3lDb21wb25lbnRJZCIsInBvb2wiLCJ1c2VkIiwidG90YWxVc2VkIiwic2l6ZSIsIkNvbXBvbmVudE1hbmFnZXIiLCJuZXh0Q29tcG9uZW50SWQiLCJvYmplY3RQb29sIiwicHJvcE5hbWUiLCJWZXJzaW9uIiwiRW50aXR5IiwiX2VudGl0eU1hbmFnZXIiLCJpZCIsImluY2x1ZGVSZW1vdmVkIiwiZW50aXR5QWRkQ29tcG9uZW50IiwiZm9yY2VJbW1lZGlhdGUiLCJoYXNSZW1vdmVkQ29tcG9uZW50IiwiaGFzQ29tcG9uZW50Iiwic3JjQ29tcG9uZW50IiwiYWRkQ29tcG9uZW50IiwiZ2V0Q29tcG9uZW50IiwiREVGQVVMVF9PUFRJT05TIiwiV29ybGQiLCJhc3NpZ24iLCJzeXN0ZW1NYW5hZ2VyIiwiZXZlbnRRdWV1ZXMiLCJDdXN0b21FdmVudCIsImV2ZW50IiwiZGV0YWlsIiwidmVyc2lvbiIsImxhc3RUaW1lIiwicmVnaXN0ZXJDb21wb25lbnQiLCJTeXN0ZW0iLCJyZWdpc3RlclN5c3RlbSIsInVucmVnaXN0ZXJTeXN0ZW0iLCJnZXRTeXN0ZW1zIiwicHJvY2Vzc0RlZmVycmVkUmVtb3ZhbCIsImNyZWF0ZUVudGl0eSIsIl9tYW5kYXRvcnlRdWVyaWVzIiwicXVlcnlDb25maWciLCJ1bnJlZ2lzdGVyZWRDb21wb25lbnRzIiwiZmlsdGVyIiwiYyIsInF1ZXJ5Q29tcG9uZW50cyIsIm1hbmRhdG9yeSIsInJlc3VsdHMiLCJ2YWxpZEV2ZW50cyIsImV2ZW50TWFwcGluZyIsImFkZGVkIiwicmVtb3ZlZCIsImNoYW5nZWQiLCJsaXN0ZW4iLCJldmVudExpc3QiLCJhZGRFdmVudExpc3RlbmVyIiwiQXJyYXkiLCJpc0FycmF5IiwiY2hhbmdlZENvbXBvbmVudCIsImpzb24iLCJxdWVyeURlZmluaXRpb24iLCJqc29uUXVlcnkiLCJtZXRob2QiLCJOb3QiLCJUYWdDb21wb25lbnQiLCJpc1RhZ0NvbXBvbmVudCIsImNvcHlWYWx1ZSIsImNsb25lVmFsdWUiLCJjb3B5QXJyYXkiLCJkZXN0IiwiY2xvbmVBcnJheSIsImNvcHlKU09OIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwiY2xvbmVKU09OIiwiY29weUNvcHlhYmxlIiwiY2xvbmVDbG9uYWJsZSIsImNyZWF0ZVR5cGUiLCJ0eXBlRGVmaW5pdGlvbiIsInVuZGVmaW5lZFByb3BlcnRpZXMiLCJwIiwiaXNUeXBlIiwiVHlwZXMiLCJOdW1iZXIiLCJCb29sZWFuIiwiU3RyaW5nIiwiUmVmIiwiZ2VuZXJhdGVJZCIsInJlc3VsdCIsImNoYXJhY3RlcnMiLCJjaGFyYWN0ZXJzTGVuZ3RoIiwiY2hhckF0IiwiZmxvb3IiLCJyYW5kb20iLCJpbmplY3RTY3JpcHQiLCJvbkxvYWQiLCJzY3JpcHQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJvbmxvYWQiLCJoZWFkIiwiZG9jdW1lbnRFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJob29rQ29uc29sZUFuZEVycm9ycyIsImNvbm5lY3Rpb24iLCJmbiIsImFyZ3MiLCJzZW5kIiwiYXBwbHkiLCJlcnJvciIsIm1lc3NhZ2UiLCJzdGFjayIsImluY2x1ZGVSZW1vdGVJZEhUTUwiLCJyZW1vdGVJZCIsImluZm9EaXYiLCJzdHlsZSIsImNzc1RleHQiLCJpbm5lckhUTUwiLCJib2R5IiwiZW5hYmxlUmVtb3RlRGV2dG9vbHMiLCJnZW5lcmF0ZU5ld0NvZGUiLCJsb2NhbFN0b3JhZ2UiLCJjbGVhciIsInNldEl0ZW0iLCJsb2NhdGlvbiIsInJlbG9hZCIsImdldEl0ZW0iLCJfX0VDU1lfUkVNT1RFX0RFVlRPT0xTX0lOSkVDVEVEIiwiX19FQ1NZX1JFTU9URV9ERVZUT09MUyIsIndvcmxkc0JlZm9yZUxvYWRpbmciLCJvbldvcmxkQ3JlYXRlZCIsImUiLCJvbkxvYWRlZCIsInBlZXIiLCJQZWVyIiwiaG9zdCIsInNlY3VyZSIsInBvcnQiLCJjb25maWciLCJpY2VTZXJ2ZXJzIiwidXJsIiwiZGVidWciLCJvbiIsImRhdGEiLCJzZXRBdHRyaWJ1dGUiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidmFsdWUiLCJldmFsIiwicmV0dXJuRXZhbCIsInVybFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsInNlYXJjaCIsImhhcyJdLCJtYXBwaW5ncyI6Im9SQXVCTyxTQUFTQSxTQUFTQyxHQUV2QixJQURBLElBQUlDLEVBQU0sR0FDREMsRUFBSSxFQUFHQSxFQUFJRixFQUFXRyxPQUFRRCxJQUFLLENBQzFDLElBQUlFLEVBQUlKLEVBQVdFLEdBRW5CLElBQUtHLG9CQUFvQkQsR0FDdkIsTUFBTSxJQUFJRSxNQUFNLDBEQUdsQixHQUFpQixpQkFBTkYsRUFBZ0IsQ0FDekIsSUFBSUcsRUFBMEIsUUFBZkgsRUFBRUcsU0FBcUIsSUFBTUgsRUFBRUcsU0FDOUNOLEVBQUlPLEtBQUtELEVBQVdILEVBQUVLLFVBQVVDLGNBRWhDVCxFQUFJTyxLQUFLSixFQUFFTSxTQUlmLE9BQU9ULEVBQUlVLE9BQU9DLEtBQUssS0FJbEIsTUFBTUMsVUFBOEIsb0JBQVhDLE9BR25CQyxJQUNYRixnQkFBMkMsSUFBdkJDLE9BQU9FLFlBQ3ZCQSxZQUFZRCxJQUFJRSxLQUFLRCxhQUNyQkUsS0FBS0gsSUFBSUUsS0FBS0MsTUFFYixTQUFTYixvQkFBb0JELEdBQ2xDLE1BQ2dCLGlCQUFOQSxRQUEwQ2UsSUFBeEJmLEVBQUVLLFVBQVVDLFNBQ3JDTixFQUFFZ0Isa0JBQTZCRCxJQUFkZixFQUFFTSxRQ3JEakIsTUFBTVcsY0FDWEMsWUFBWUMsR0FDVkMsS0FBS0MsU0FBVyxHQUNoQkQsS0FBS0UsZ0JBQWtCLEdBQ3ZCRixLQUFLRCxNQUFRQSxFQUNiQyxLQUFLRyxtQkFBcUIsS0FHNUJMLGVBQWVNLEVB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
